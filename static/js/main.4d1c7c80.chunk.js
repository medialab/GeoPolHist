(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(22),o=n.n(i),l=(n(76),n(68)),s=n(26),u=n(21),m=n(67),d=n(30),f=n(69),p=(n(77),n(28)),O=n(9),b=n(32),g=n(70),h=n(6),y=n(62),j=n(33),E=n.n(j),v={"Became part of":{slug:"part",priority:2},"Became colony of":{slug:"col",priority:3},"Became possession of":{slug:"poss",priority:3},"Claimed by":{slug:"claim",priority:0},"Became protectorate of":{slug:"prot",priority:3},"Became associated state of":{slug:"assoc",priority:0},"Occupied by":{slug:"occ",priority:1},"Leased to":{slug:"leas",priority:0},"Became neutral or demilitarized zone of":{slug:"neut",priority:0},"Mandated to":{slug:"mand",priority:0},Sovereign:{slug:"SOV",priority:4},"Unincorporated territory":{slug:"uninc",priority:0},"Autonomous constituent country of":{slug:"autonom",priority:0},"Sovereign (unrecognised)":{slug:"SOV_U",priority:0},"Sovereign (limited)":{slug:"SOV_L",priority:1},"Protected area of":{slug:"protected",priority:0},Unknown:{slug:"N/A",priority:0},"":{slug:"alliance",priority:0}},k=function(e,t){return"translate(".concat(e,", ").concat(t,")")};!function(e){e.part="part",e.col="col",e.poss="poss",e.claim="claim",e.prot="prot",e.assoc="assoc",e.occ="occ",e.leas="leas",e.neut="neut",e.mand="mand",e.SOV="SOV",e.uninc="uninc",e.autonom="autonom",e.SOV_U="SOV_U",e.SOV_L="SOV_L",e.protected="protected",e.NA="N/A",e.alliance="alliance"}(a||(a={}));var _=n(46),w=n(49),C=n(29),W=n(34),S=n(63),N={links:[],entities:[]},x=Object(c.createContext)({state:N,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),L=Object(_.a)(function(e){return e.COW_code}),M=[a.SOV,a.SOV_U,a.SOV_L],V=function(e,t){var n=new S.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var c=e[a],r=t[a];if(void 0===r)continue;for(var i=0;i<c.length;i++){var o=c[i];n.set(r,o)}}return n},A=function(e,t){switch(t.type){case"LOADED":var n=t.payload.map(function(e){return{id:E()(),COW_code:e.COW_code,COW_name:e.COW_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:v[e.link_type],sovereign:{COW_code:e.sovereign_COW_code,COW_name:e.sovereign_COW_name}}}),a=L(n),c=Object(W.a)(function(e,t){var c=Object(C.a)(Object(w.a)(function(e){return!M.includes(e.status.slug)&&Object(b.a)(e.COW_code,t)}),Object(_.a)(function(e){return e.sovereign.COW_code})),r=Object(C.a)(Object(w.a)(function(e){return Object(b.a)(e.sovereign.COW_code,t)}),L),i=c(e);return{id:t,name:a[t][0].COW_name,start:Object(h.e)(e,function(e){return e.start_year}),end:Object(h.d)(e,function(e){return e.end_year}),occupations:i,campains:r(n)}},a),r=Object(l.a)(function(e){return Object(g.a)({},e,{occupations:V(e.occupations,c),campains:V(e.campains,c)})},c);return n.forEach(function(e){e.sovereign=r[e.sovereign.COW_code]}),{links:n,entities:Object(h.k)(r)}}return e},B=function(e){return Object(y.action)("LOADED",e)},H=Object(h.c)("data/RICentities_links.csv"),U=function(e){var t=Object(c.useReducer)(A,N),n=Object(O.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)(function(){H.then(Object(C.a)(B,i))},[]),r.a.createElement(x.Provider,{value:{state:a,dispatch:i}},e.children)},z=n(47),D=n(35),P=n(64),T=n(39),I=n.n(T),J=(n(108),Object(h.g)(["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]).domain(Object(z.a)(a))),R=50,G=0,Y=0,$=50,q=0,F=Object(h.j)("%Y"),K=Object(C.a)(Object(D.a)(function(e,t){var n=Object(O.a)(t,2)[1];return[].concat(Object(p.a)(e),Object(p.a)(n))},[]),Object(P.a)(function(e){return e.status.slug})),Q=function(e){var t=e.xScale,n=e.data,a=e.nbLines,i=Object(c.useMemo)(E.a,[]),o=e.width-q-Y,l=a*e.lineHeight+G+$,s=l-G-$,u=e.hideGroupLabels?0:200,m=s/n.length,d=function(n){return Math.max(e.intervalMinWidth,t(n.end_year)-t(n.start_year))};t.range([u,o]);var f=Object(h.f)().domain([0,a]).range([0,s]),p=Object(h.b)(t),b=Object(h.a)(t),g=.8*m,y=(m-g)/2,j=Object(c.useState)(),v=Object(O.a)(j,2),_=v[0],w=v[1],C=Object(c.useState)(),S=Object(O.a)(C,2),N=S[0],x=S[1],L=Object(c.useMemo)(function(){return K(n)},[n]);return Object(c.useEffect)(function(){return function(){w(null),x(null)}},[e.data]),r.a.createElement("div",{className:"timelines-container",style:{width:o},onMouseLeave:function(){return w(null)}},_&&r.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(t(_.link.start_year),"px, ").concat(f(_.index)+R+G+e.lineHeight+20,"px)"),minWidth:d(_.link)}},r.a.createElement("span",{className:"tooltip"},_.link.COW_name," was a ",_.link.status.slug," from ",F(_.link.start_year)," to ",F(_.link.end_year))),r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"legend-container"},Object(z.a)(Object(W.a)(function(e,t){return r.a.createElement("button",{onClick:function(){return x(N===t?null:t)},className:I()({"legend-item":!0,"legend-item--hidden":N&&N!==t}),key:t,style:{backgroundColor:J(t)}},t," : ",e)},L))),r.a.createElement("svg",{height:20,width:e.width},r.a.createElement("g",{transform:k(q,G)},r.a.createElement("g",{transform:k(0,17),ref:function(e){e&&Object(h.i)(e).call(p)}})))),r.a.createElement("svg",{height:l,width:e.width},r.a.createElement("g",{transform:k(q,G)},r.a.createElement("defs",null,r.a.createElement("pattern",{id:"diagonalHatch-".concat(i),patternUnits:"userSpaceOnUse",width:"4",height:"4"},r.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),r.a.createElement("clipPath",{id:"name-area-".concat(i)},r.a.createElement("rect",{x:0,y:0,height:s,width:u}))),r.a.createElement("g",{transform:k(0,s),ref:function(e){e&&Object(h.i)(e).call(b)}}),r.a.createElement("g",{className:I()({group:!0,has_status:!!N},N)},n.map(function(n,a){var c=Object(O.a)(n,2),l=c[0],s=c[1];return r.a.createElement("g",{key:l.name,className:l.name,transform:k(0,f(a))},r.a.createElement("line",{className:"group-separator",x1:0,x2:o,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),r.a.createElement("text",{className:"entity-label",style:{clipPath:"url(#name-area-".concat(i,")")},fontSize:e.lineHeight,dy:"1em"},l.name),r.a.createElement("g",null,s.map(function(n){var c=d(n);return r.a.createElement("g",{key:n.id,transform:k(t(n.start_year),y)},r.a.createElement("rect",{rx:"5",className:I()("link-rect",n.status.slug),onClick:function(){return e.onLinkClick(n)},onMouseEnter:function(){return w({link:n,index:a})},fill:isNaN(c)?"url(#diagonalHatch-".concat(i,")"):J(n.status.slug),stroke:_&&_.link===n?"white":"black",strokeOpacity:_&&_.link===n?1:.2,strokeWidth:_&&_.link===n?2:1,width:isNaN(c)?"100%":c,height:g,y:0,x:0}))})))})))))},X=function(e,t){return e+ +t.end_year-+t.start_year},Z=Object(d.a)(function(e,t){var n=Object(O.a)(e,2)[1];return Object(O.a)(t,2)[1].reduce(X,0)-n.reduce(X,0)}),ee=function(e){var t=e.history,n=e.country,a=Object(c.useCallback)(function(e){t.push("/country/".concat(e.sovereign.id))},[t]),i=Object(c.useCallback)(function(e){t.push("/country/".concat(e.COW_code))},[t]),o=Array.from(n.occupations.associations()),l=Array.from(n.campains.associations()),u=Object(c.useMemo)(function(){return Z([].concat(Object(p.a)(o),Object(p.a)(l)))},[o,l]),m=Object(h.e)(u,function(e){return Object(O.a)(e,1)[0].start}),d=Object(h.d)(u,function(e){return Object(O.a)(e,1)[0].end}),f=Object(h.h)().domain([m,d]);return r.a.createElement("div",null,r.a.createElement("aside",null,r.a.createElement(s.b,{to:"/"},"Home")),r.a.createElement("h1",null,n.name),r.a.createElement("h2",null,"Territory masters"),r.a.createElement(Q,{onLinkClick:a,intervalMinWidth:5,data:o,nbLines:n.occupations.dimension,lineHeight:20,width:1e3,xScale:f}),r.a.createElement("h2",null,"Occupying territories"),r.a.createElement(Q,{onLinkClick:i,intervalMinWidth:5,data:l,nbLines:n.campains.dimension,lineHeight:20,width:1e3,xScale:f}))},te=function(e){var t=e.match.params.id,n=Object(c.useContext)(x).state.entities.find(function(e){return Object(b.a)(e.id,t)});return void 0===n?r.a.createElement("div",null,"Loading"):r.a.createElement(ee,Object.assign({},e,{country:n}))},ne=Object(l.a)(function(e){return{value:e.id,label:e.name}}),ae=Object(d.a)(function(e,t){return t.campains.size-e.campains.size}),ce=Object(d.a)(function(e,t){return t.occupations.size-e.occupations.size}),re=Object(f.a)(5),ie=function(e){var t=re(ae(e.entities)),n=re(ce(e.entities));return r.a.createElement("div",null,r.a.createElement("h2",null,"Some examples:"),r.a.createElement("div",{className:"line"},r.a.createElement("div",{className:"grow"},r.a.createElement("h3",null,"Most aggresive empires:"),r.a.createElement("ol",null,t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name))}))),r.a.createElement("div",{className:"grow"},r.a.createElement("h3",null,"Occupied by most different countries:"),r.a.createElement("ol",null,n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name))})))))},oe=function(e){var t=Object(c.useContext)(x).state,n=Object(c.useCallback)(function(t){e.history.push("/country/".concat(t.value))},[e.history]);return r.a.createElement("div",{className:"container container--home"},r.a.createElement("h1",null,"Welcome"),r.a.createElement("h3",null,"To the correlates of war time series explorer"),r.a.createElement("p",null,"Type a country or a territorial name in the above text input :"),r.a.createElement(m.a,{placeholder:t.entities.length?"Type in":"Still loading",onChange:n,options:ne(t.entities)}),t.entities.length?r.a.createElement(ie,{entities:t.entities}):r.a.createElement("p",null,"Data is still loading..."))},le=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(U,null,r.a.createElement(s.a,{basename:"/ric_entities_timelines"},r.a.createElement(u.a,{path:"/",exact:!0,component:oe}),r.a.createElement(u.a,{path:"/country/:id",component:te}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,n){e.exports=n(115)},76:function(e,t,n){},77:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.4d1c7c80.chunk.js.map