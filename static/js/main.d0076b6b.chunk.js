(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return a});var a,r={"Became part of":{slug:"part",priority:2},"Became colony of":{slug:"col",priority:3},"Became possession of":{slug:"poss",priority:3},"Claimed by":{slug:"claim",priority:0},"Became protectorate of":{slug:"prot",priority:3},"Became associated state of":{slug:"assoc",priority:0},"Occupied by":{slug:"occ",priority:1},"Leased to":{slug:"leas",priority:0},"Became neutral or demilitarized zone of":{slug:"neut",priority:0},"Mandated to":{slug:"mand",priority:0},Sovereign:{slug:"SOV",priority:4},"Unincorporated territory":{slug:"uninc",priority:0},"Autonomous constituent country of":{slug:"autonom",priority:0},"Sovereign (unrecognised)":{slug:"SOV_U",priority:0},"Sovereign (limited)":{slug:"SOV_L",priority:1},"Protected area of":{slug:"protected",priority:0},Unknown:{slug:"N/A",priority:0},"":{slug:"alliance",priority:0}},c=function(e,t){return"translate(".concat(e,", ").concat(t,")")};!function(e){e.part="part",e.col="col",e.poss="poss",e.claim="claim",e.prot="prot",e.assoc="assoc",e.occ="occ",e.leas="leas",e.neut="neut",e.mand="mand",e.SOV="SOV",e.uninc="uninc",e.autonom="autonom",e.SOV_U="SOV_U",e.SOV_L="SOV_L",e.protected="protected",e.NA="N/A",e.alliance="alliance"}(a||(a={}))},104:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),o=(n(71),n(55));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n(11),r=n(65),c=n(0),i=n.n(c),o=n(7),l=n(57),s=n(58),u=n.n(s),d=n(10),m=n(37),f=n(40),b=n(26),O=n(39),p=n(23),g=n(27),j=n(59),h={links:[],entities:[]},y=Object(c.createContext)({state:h,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),v=Object(m.a)(function(e){return e.COW_code}),E=[d.a.SOV,d.a.SOV_U,d.a.SOV_L],k=function(e,t){var n=new j.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var r=e[a],c=t[a];if(void 0===c)continue;for(var i=0;i<r.length;i++){var o=r[i];n.set(c,o)}}return n},_=function(e,t){switch(t.type){case"LOADED":var n=t.payload.map(function(e){return{id:u()(),COW_code:e.COW_code,COW_name:e.COW_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:d.c[e.link_type],sovereign:{COW_code:e.sovereign_COW_code,COW_name:e.sovereign_COW_name}}}),a=v(n),c=Object(g.a)(function(e,t){var r=Object(p.a)(Object(O.a)(function(e){return!E.includes(e.status.slug)&&Object(b.a)(e.COW_code,t)}),Object(m.a)(function(e){return e.sovereign.COW_code})),c=Object(p.a)(Object(O.a)(function(e){return Object(b.a)(e.sovereign.COW_code,t)}),v),i=r(e);return{id:t,name:a[t][0].COW_name,start:Object(o.d)(e,function(e){return e.start_year}),end:Object(o.c)(e,function(e){return e.end_year}),occupations:i,campains:c(n)}},a),i=Object(f.a)(function(e){return Object(r.a)({},e,{occupations:k(e.occupations,c),campains:k(e.campains,c)})},c);return n.forEach(function(e){e.sovereign=i[e.sovereign.COW_code]}),{links:n,entities:Object(o.j)(i)}}return e},w=function(e){return Object(l.action)("LOADED",e)},C=Object(o.b)("data/RICentities_links.csv");t.b=function(e){var t=Object(c.useReducer)(_,h),n=Object(a.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)(function(){C.then(Object(p.a)(w,o))},[]),i.a.createElement(y.Provider,{value:{state:r,dispatch:o}},e.children)}},55:function(e,t,n){"use strict";(function(e){var a=n(36),r=n.n(a),c=n(56),i=n(0),o=n.n(i),l=n(40),s=n(5),u=n(18),d=n(63),m=(n(73),n(64)),f=n(25),b=Object(l.a)(function(e){return{value:e.id,label:e.name}});console.log(e);var O=Object(s.g)({"/":Object(s.h)({title:"Welcome",view:o.a.createElement(function(){var e=Object(u.d)(),t=Object(i.useContext)(f.a).state,n=Object(i.useCallback)(function(t){e.navigate("/country/".concat(t.value))},[e]);return o.a.createElement(d.a,{onChange:n,options:b(t.entities)})},null)}),"/country/:id":Object(s.h)(function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{title:"Coutry",view:o.a.createElement(m.a,{id:t.params.id})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),p=Object(s.c)({routes:O,basename:"/ric_entities_timelines"});t.a=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(f.b,null,o.a.createElement(u.b,{navigation:p},o.a.createElement(i.Suspense,{fallback:null},o.a.createElement(u.c,null)))))}}).call(this,n(44))},64:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(26),i=n(18),o=n(25),l=n(41),s=n(11),u=n(7),d=n(38),m=n(60),f=n(28),b=n(61),O=n(27),p=n(23),g=n(31),j=n.n(g),h=n(10),y=(n(104),Object(u.f)(["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]).domain(Object(d.a)(h.a))),v=50,E=0,k=0,_=50,w=0,C=Object(u.i)("%Y"),W=function(e,t){return e+ +t.end_year-+t.start_year},S=Object(m.a)(function(e,t){var n=Object(s.a)(e,2)[1];return Object(s.a)(t,2)[1].reduce(W,0)-n.reduce(W,0)}),N=Object(p.a)(Object(f.a)(function(e,t){var n=Object(s.a)(t,2)[1];return[].concat(Object(l.a)(e),Object(l.a)(n))},[]),Object(b.a)(function(e){return e.status.slug})),x=function(e){var t=Object(a.useMemo)(function(){return S(Array.from(e.data.associations()))},[e.data]),n=Object(u.d)(t,function(e){return Object(s.a)(e,1)[0].start}),c=Object(u.c)(t,function(e){return Object(s.a)(e,1)[0].end}),i=e.width-w-k,o=e.data.dimension*e.lineHeight+E+_,l=o-E-_,m=e.hideGroupLabels?0:200,f=l/t.length,b=function(t){return Math.max(e.intervalMinWidth,p(t.end_year)-p(t.start_year))},p=Object(u.g)().domain([n,c]).range([m,i]),g=Object(u.e)().domain([0,e.data.dimension]).range([0,l]),W=Object(u.a)(p),x=.8*f,M=(f-x)/2,L=Object(a.useState)(),V=Object(s.a)(L,2),A=V[0],B=V[1],H=Object(a.useState)(),U=Object(s.a)(H,2),D=U[0],P=U[1],z=Object(a.useMemo)(function(){return N(t)},[t]);return Object(a.useEffect)(function(){return function(){B(null),P(null)}},[e.data]),r.a.createElement("div",{className:"timelines-container",style:{width:i}},A&&r.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(p(A.link.start_year),"px, ").concat(g(A.index)+v+E+e.lineHeight,"px)"),minWidth:b(A.link)}},r.a.createElement("span",{className:"tooltip"},A.link.COW_name," was a ",A.link.status.slug," from ",C(A.link.start_year)," to ",C(A.link.end_year))),r.a.createElement("div",{className:"legend-container"},Object(d.a)(Object(O.a)(function(e,t){return r.a.createElement("button",{onClick:function(){return P(D===t?null:t)},className:j()({"legend-item":!0,"legend-item--hidden":D&&D!==t}),key:t,style:{backgroundColor:y(t)}},t," : ",e)},z))),r.a.createElement("svg",{height:o,width:e.width},r.a.createElement("g",{transform:Object(h.b)(w,E)},r.a.createElement("defs",null,r.a.createElement("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4"},r.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),r.a.createElement("clipPath",{id:"chart-content"},r.a.createElement("rect",{x:m,y:0,height:l,width:i-m})),r.a.createElement("clipPath",{id:"name-area"},r.a.createElement("rect",{x:0,y:0,height:l,width:m}))),r.a.createElement("g",{transform:Object(h.b)(0,l),ref:function(e){e&&Object(u.h)(e).call(W)}}),r.a.createElement("g",{className:j()({group:!0,has_status:!!D},D)},t.map(function(t,n){var a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement("g",{key:c.name,className:c.name,transform:Object(h.b)(0,g(n))},r.a.createElement("line",{className:"group-separator",x1:0,x2:i,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),r.a.createElement("text",{className:"entity-label",fontSize:e.lineHeight,dy:"1em"},c.name),r.a.createElement("g",null,o.map(function(t){var a=b(t);return r.a.createElement("g",{key:t.id,transform:Object(h.b)(p(t.start_year),M)},r.a.createElement("rect",{rx:"5",className:j()("link-rect",t.status.slug),onClick:function(){return e.onLinkClick(t)},onMouseEnter:function(){return B({link:t,index:n})},fill:isNaN(a)?"url(#diagonalHatch)":y(t.status.slug),stroke:A&&A.link===t?"white":"black",strokeOpacity:A&&A.link===t?1:.2,strokeWidth:A&&A.link===t?2:1,width:isNaN(a)?"100%":a,height:x,y:0,x:0}))})))})))))};t.a=function(e){var t=e.id,n=Object(a.useContext)(o.a).state.entities.find(function(e){return Object(c.a)(e.id,t)}),l=Object(i.d)(),s=Object(a.useCallback)(function(e){console.log(e),l.navigate("/country/".concat(e.sovereign.id))},[l]),u=Object(a.useCallback)(function(e){l.navigate("/country/".concat(e.COW_code))},[l]);return void 0===n?r.a.createElement("div",null,"Loading"):r.a.createElement("div",null,r.a.createElement("aside",null,r.a.createElement(i.a,{href:"/"},"Home")),r.a.createElement("h1",null,n.name),r.a.createElement("h2",null,"Territory masters"),r.a.createElement(x,{onLinkClick:s,intervalMinWidth:5,data:n.occupations,lineHeight:20,width:1e3}),r.a.createElement("h2",null,"Occupying territories"),r.a.createElement(x,{onLinkClick:u,intervalMinWidth:5,data:n.campains,lineHeight:20,width:1e3}))}},66:function(e,t,n){e.exports=n(108)},71:function(e,t,n){},73:function(e,t,n){}},[[66,1,2]]]);
//# sourceMappingURL=main.d0076b6b.chunk.js.map