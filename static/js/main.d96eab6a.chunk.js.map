{"version":3,"sources":["AppContext.tsx","utils.ts","timeline.tsx","TopMenu.tsx","Country.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["initialState","links","entities","status","AppContext","createContext","state","dispatch","arg","console","log","groupByGPHCode","groupBy","link","GPH_code","toMap","object","map","MultiMap","key","hasOwnProperty","entity","undefined","index","length","set","reducer","action","type","linkPayload","payload","statusPayload","csvLink","l","id","uuid","GPH_name","continent","end_year","Date","start_year","GPH_status","sovereign","sovereign_GPH_code","sovereign_GPH_name","error","entitiesMap","wEntities","mapObjIndexed","ownLinks","selectOccupations","pipe","filter","equals","selectCampains","occ","campains","capMap","slug","flatten","values","name","start","min","d","end","max","occupations","campainsMap","wMapEntities","Object","objectSpread","forEach","loadedActionCreator","data","entitiesStatusPromise","csv","statusPromise","fetch","then","response","json","dataPromise","Promise","all","AppContextProvider","props","_useReducer","useReducer","_useReducer2","slicedToArray","useEffect","react_default","a","createElement","Provider","value","children","translate","x","y","concat","margins","formater","timeFormat","Timelines","xScale","nbLines","colorScale","useMemo","width","elHeight","lineHeight","height","groupWidth","hideGroupLabels","groupHeight","range","continentsLabels","reduce","continents","_ref","add","Set","yScale","scaleLinear","domain","size","xAxisTop","axisTop","xAxisBottom","axisBottom","intervalBarHeight","intervalBarMargin","_useState","useState","_useState2","hover","setHover","_useState3","_useState4","setStatus","groupedByStatus","sortBy","e","priority","sortStatus","acc","_ref3","toConsumableArray","reverse","indexShift","className","style","onMouseLeave","s","onClick","cx","legend-item","legend-item--hidden","backgroundColor","transform","ref","element","select","call","patternUnits","stroke","strokeWidth","group","has_status","_ref5","_ref6","showContinent","react","fill","x1","x2","y1","y2","strokeOpacity","textAnchor","fontSize","dy","clipPath","cursor","onEntityClick","slice","w","Math","intervalMinWidth","rx","onMouseEnter","isNaN","TopMenu","country","Fragment","src","react_router_dom","to","sortDate","sort","b","countYears","orderMethods","duration","_ref2","aLinks","bLinks","year","_ref9","_ref11","sortByStartYear","deOverlapLinks","os","o","previous","warn","push","Country","history","useCallback","Array","from","associations","minDate","_ref13","maxDate","_ref15","scaleTime","useContext","scaleOrdinal","keys","orderBy","setOrderBy","orderedCampains","TopMenu_TopMenu","src_timeline","dimension","react_select_browser_esm","onChange","defaultValue","label","theme","borderRadius","colors","primary25","primary","background","color","isSearchable","options","Loader","match","params","find","Country_Country","assign","countriesToOptions","sortByOccupation","getCol","pathOr","sortByColonyNumber","takeTop5","take","Examples","mostOccupied","mostCollonies","disapeared","sortByOccEndDate","sortByEndDate","filterSortByDis","yearFormat","Intl","DateTimeFormat","format","Home","event","href","lib","placeholder","App_Examples","title","textAlign","alt","App","src_AppContext","basename","react_router","path","exact","component","Boolean","window","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yXAaMA,EAA4B,CAChCC,MAAO,GACPC,SAAU,GACVC,OAAQ,IAQGC,EAAaC,wBAA0B,CAClDC,MAAON,EACPO,SAAU,SAACC,GACTC,QAAQC,IAAI,6BAA8BF,MAIxCG,EAAiBC,YAAQ,SAACC,GAAD,OAAgBA,EAAKC,WAE9CC,EAAQ,SACZC,EACAd,GAEA,IAAMe,EAAM,IAAIC,WAChB,IAAK,IAAMC,KAAOH,EAChB,GAAIA,EAAOI,eAAeD,GAAM,CAC9B,IAAMlB,EAAQe,EAAOG,GACfE,EAASnB,EAASiB,GACxB,QAAeG,IAAXD,EACF,SAEF,IAAK,IAAIE,EAAQ,EAAGA,EAAQtB,EAAMuB,OAAQD,IAAS,CACjD,IAAMV,EAAOZ,EAAMsB,GACnBN,EAAIQ,IAAIJ,EAAQR,IAItB,OAAOI,GAGHS,EAAU,SAACpB,EAAoBqB,GACnC,OAAQA,EAAOC,MACb,IAAK,SACH,IAAMC,EAAcF,EAAOG,QAAQ,GAC7BC,EAAgBJ,EAAOG,QAAQ,GAC/B7B,EAAiB4B,EAAYZ,IAAI,SAACe,GACtC,IAAMC,EAAI,CACRC,GAAIC,MACJrB,SAAUkB,EAAQlB,SAClBsB,SAAUJ,EAAQI,SAClBC,UAAWL,EAAQK,UACnBC,SAAU,IAAIC,KAAKP,EAAQM,UAC3BE,WAAY,IAAID,KAAKP,EAAQQ,YAC7BrC,OAAQ4B,EAAcC,EAAQS,YAC9BC,UAAW,CACT5B,SAAUkB,EAAQW,mBAClBP,SAAUJ,EAAQY,qBAItB,OADKX,EAAE9B,QAAQM,QAAQoC,MAAM,oBAAqBb,GAC3CC,IAEHa,EAAcnC,EAAeV,GAC7B8C,EAAuCC,YAC3C,SAACC,EAAkBnC,GACjB,IAAMoC,EAAoBC,YACxBC,YAAO,SAACvC,GAAD,OAAiBwC,YAAOxC,EAAKC,SAAUA,KAC9CF,YAAQ,SAACC,GAAD,OAAiBA,EAAK6B,UAAU5B,UAAYA,KAEhDwC,EAAiBH,YACrBC,YAAO,SAACvC,GAAD,OAAiBwC,YAAOxC,EAAK6B,UAAU5B,SAAUA,KACxDH,GAEI4C,EAAML,EAAkBD,GACxBO,EAAWF,EAAerD,GAC1BwD,EAAS7C,YACb,SAACC,GAAD,OAAUA,EAAKV,OAAOuD,MACtBC,YAAQC,YAAOJ,KAEjB,MAAO,CACLtB,GAAIpB,EACJ+C,KAAMf,EAAYhC,GAAU,GAAGsB,SAC/BC,UAAWS,EAAYhC,GAAU,GAAGuB,UACpCyB,MAAOC,YAAId,EAAU,SAACe,GAAD,OAAOA,EAAExB,aAC9ByB,IAAKC,YAAIjB,EAAU,SAACe,GAAD,OAAOA,EAAE1B,WAC5B6B,YAAaZ,EACbC,SAAUA,EACVY,YAAaX,IAGjBX,GAEIuB,EAAepD,YACnB,SAACI,GAAD,OAAAiD,OAAAC,EAAA,EAAAD,CAAA,GACKjD,EADL,CAEE8C,YAAapD,EAAMM,EAAO8C,YAAapB,GACvCS,SAAUzC,EAAMM,EAAOmC,SAAUT,MAEnCA,GAKF,OAHA9C,EAAMuE,QAAQ,SAAC3D,GACbA,EAAK6B,UAAY2B,EAAaxD,EAAK6B,UAAU5B,YAExC,CACLb,MAAOA,EACPC,SAAU0D,YAAOS,GACjBlE,OAAQ4B,GAId,OAAOzB,GAGHmE,EAAsB,SAACC,GAAD,OAC1B/C,iBAAO,SAAU+C,IAEbC,EAAwBC,YAC5B,mDAEIC,EAAgBC,MAAM,0BAA0BC,KAAK,SAACC,GAAD,OACzDA,EAASC,SAELC,EAAcC,QAAQC,IAAI,CAACT,EAAuBE,IAazCQ,EAZsB,SAACC,GAAe,IAAAC,EACzBC,qBAAW9D,EAAS1B,GADKyF,EAAAnB,OAAAoB,EAAA,EAAApB,CAAAiB,EAAA,GAC5CjF,EAD4CmF,EAAA,GACrClF,EADqCkF,EAAA,GAKnD,OAHAE,oBAAU,WACRT,EAAYH,KAAK5B,YAAKsB,EAAqBlE,KAC1C,IAEDqF,EAAAC,EAAAC,cAAC1F,EAAW2F,SAAZ,CAAqBC,MAAO,CAAE1F,QAAOC,SAAUA,IAC5C+E,EAAMW,oCC3IAC,UAAY,SAACC,EAAWC,GAAZ,mBAAAC,OAAuCF,EAAvC,MAAAE,OAA6CD,EAA7C,OCYnBE,EACC,EADDA,EAEG,EAFHA,EAGI,GAHJA,EAIE,EAEFC,EAAWC,YAAW,MA8RbC,EAjRV,SAACnB,GAAU,IAENoB,EAAsCpB,EAAtCoB,OAAQhC,EAA8BY,EAA9BZ,KAAMiC,EAAwBrB,EAAxBqB,QAASC,EAAetB,EAAfsB,WACzB1E,EAAK2E,kBAAQ1E,IAAM,IACnB2E,EAAQxB,EAAMwB,MAAQR,EAAeA,EACrCS,EAAWJ,EAAUrB,EAAM0B,WAAaV,EAAcA,EACtDW,EAASF,EAAWT,EAAcA,EAClCY,EAAa5B,EAAM6B,gBAAkB,EAAI,IACzCC,EAAcH,EAASvC,EAAKlD,OAGlCkF,EAAOW,MAAM,CAACH,EAAYJ,EAAQ,KAElC,IAAMQ,EACc,cAAlBhC,EAAM1E,QACF8D,EAAK6C,OAAO,SAACC,EAADC,GAA0B,IAAZpG,EAAYiD,OAAAoB,EAAA,EAAApB,CAAAmD,EAAA,MAEpC,OADAD,EAAWE,IAAIrG,EAAOgB,WACfmF,GACN,IAAIG,UACPrG,EACAsG,EAASC,cACZC,OAAO,CAAC,EAAGnB,GAAWW,EAAmBA,EAAiBS,KAAO,KACjEV,MAAM,CAAC,EAAGJ,IAEPe,EAAWC,YAAQvB,GACnBwB,EAAcC,YAAWzB,GACzB0B,EAAoB,GAAMhB,EAC1BiB,GAAqBjB,EAAcgB,GAAqB,EA3BhDE,EA4BYC,qBA5BZC,EAAAlE,OAAAoB,EAAA,EAAApB,CAAAgE,EAAA,GA4BPG,EA5BOD,EAAA,GA4BAE,EA5BAF,EAAA,GAAAG,EA6BcJ,qBA7BdK,EAAAtE,OAAAoB,EAAA,EAAApB,CAAAqE,EAAA,GA6BPxI,EA7BOyI,EAAA,GA6BCC,EA7BDD,EAAA,GA+BRE,EADaC,YAAO,SAACC,GAAD,OAAOA,EAAEC,SAAWD,EAAEvG,YACxByG,CACtBtF,YACEc,EACG6C,OAAO,SAAC4B,EAADC,GAAA,IAASnJ,EAATqE,OAAAoB,EAAA,EAAApB,CAAA8E,EAAA,eAAA/C,OAAA/B,OAAA+E,EAAA,EAAA/E,CAA0C6E,GAA1C7E,OAAA+E,EAAA,EAAA/E,CAAkDrE,KAAQ,IACjEsH,OAAO,SAAC4B,EAAKtI,GAEZ,OADAsI,EAAItI,EAAKV,OAAOuD,MAAQ7C,EAAKV,OACtBgJ,GACN,MAEPG,UAEF3D,oBACE,kBAAM,WACJ+C,EAAS,MACTG,EAAU,QAEZ,CAACvD,EAAMZ,OAIT,IAAI6E,EAAa,EAEjB,OACE3D,EAAAC,EAAAC,cAAA,OACE0D,UAAU,sBACVC,MAAO,CAAE3C,MAAOA,GAChB4C,aAAc,kBAAMhB,EAAS,QAE7B9C,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,UACb5D,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,oBACZV,EAAgB7H,IAAI,SAAC0I,GAAD,OACnB/D,EAAAC,EAAAC,cAAA,QACE3E,IAAKwI,EAAEjG,KACPkG,QAAS,WACPzJ,IAAWwJ,EAAEjG,KAAOmF,EAAU,MAAQA,EAAUc,EAAEjG,OAEpD8F,UAAWK,IAAG,CACZC,eAAe,EACfC,sBAAuB5J,GAAUA,IAAWwJ,EAAEjG,QAGhDkC,EAAAC,EAAAC,cAAA,OACE0D,UAAU,kBACVC,MACE,CAAEO,gBAAiBpD,EAAW+C,EAAEjG,SAGpCkC,EAAAC,EAAAC,cAAA,YAAO6D,EAAElH,gBAIfmD,EAAAC,EAAAC,cAAA,OAAKmB,OAAQ,GAAIH,MAAOxB,EAAMwB,OAC5BlB,EAAAC,EAAAC,cAAA,KAAGmE,UAAW/D,EAAUI,EAAcA,IACpCV,EAAAC,EAAAC,cAAA,KACEmE,UAAW/D,EAAU,EAAG,IACxBgE,IAAK,SAACC,GACAA,GACFC,YAAOD,GAASE,KAAKrC,SAOjCpC,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,YACb5D,EAAAC,EAAAC,cAAA,OAAKmB,OAAQF,EAAUD,MAAOxB,EAAMwB,OAClClB,EAAAC,EAAAC,cAAA,KAAGmE,UAAW/D,EAAUI,EAAcA,IACpCV,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,WACE5D,GAAE,iBAAAmE,OAAmBnE,GACrBoI,aAAa,iBACbxD,MAAM,IACNG,OAAO,KAEPrB,EAAAC,EAAAC,cAAA,QACE9B,EAAE,oCACFyF,MAAO,CAAEc,OAAQ,QAASC,YAAa,MAG3C5E,EAAAC,EAAAC,cAAA,YAAU5D,GAAE,aAAAmE,OAAenE,IACzB0D,EAAAC,EAAAC,cAAA,QAAMK,EAAG,EAAGC,EAAG,EAAGa,OAAQA,EAAQH,MAAOI,MAG7CtB,EAAAC,EAAAC,cAAA,KACEmE,UAAW/D,EAAU,EAAGe,GACxBiD,IAAK,SAACC,GACAA,GACFC,YAAOD,GAASE,KAAKnC,MAI3BtC,EAAAC,EAAAC,cAAA,KACE0D,UAAWK,IACT,CACEY,OAAO,EACPC,aAAcvK,GAEhBA,IAGDuE,EAAKzD,IAAI,SAAA0J,EAAkBpJ,GAAU,IAAAqJ,EAAAtG,OAAAoB,EAAA,EAAApB,CAAAqG,EAAA,GAA1BtJ,EAA0BuJ,EAAA,GAAlB3K,EAAkB2K,EAAA,GAC9BC,EACc,cAAlBvF,EAAM1E,UACK,IAAVW,GACCF,EAAOgB,YAAcqC,EAAKnD,EAAQ,GAAG,GAAGc,WAK5C,OAHIwI,GAAmC,cAAlBvF,EAAM1E,UACzB2I,GAAc,GAGd3D,EAAAC,EAAAC,cAACgF,EAAA,SAAD,CAAU3J,IAAKE,EAAOwC,MACD,cAAlByB,EAAM1E,SAA2BiK,GAChCjF,EAAAC,EAAAC,cAAA,KACE3E,IAAKE,EAAOgB,UACZmH,UAAU,YACVS,UAAW/D,EAAU,EAAG0B,EAAOrG,EAAQgI,EAAa,KAEnD,IACD3D,EAAAC,EAAAC,cAAA,QAAMiF,KAAK,OAAOjE,MAAM,OAAOG,OAAO,UACtCrB,EAAAC,EAAAC,cAAA,QACE0D,UAAU,kBACVwB,GAAI,EACJC,GAAInE,EACJoE,GAAI,EACJC,GAAI,EACJZ,OAAO,QACPa,cAAe,KAEjBxF,EAAAC,EAAAC,cAAA,QACEK,EAAE,MACFkF,WAAW,SACXC,SAAS,MACTC,GAAG,MACH/B,UAAU,kBAETnI,EAAOgB,UACRuD,EAAAC,EAAAC,cAAA,aAAQzE,EAAOgB,aAIrBuD,EAAAC,EAAAC,cAAA,KACE3E,IAAKE,EAAOwC,KACZ2F,UAAWnI,EAAOwC,KAClBoG,UAAW/D,EAAU,EAAG0B,EAAOrG,EAAQgI,KAEvC3D,EAAAC,EAAAC,cAAA,QACE0D,UAAU,kBACVwB,GAAI,EACJC,GAAInE,EACJoE,GAAI,EACJC,GAAI,EACJZ,OAAO,QACPa,cAAe,KAEjBxF,EAAAC,EAAAC,cAAA,QACE0D,UAAU,eACVC,MAAO,CACL+B,SAAQ,kBAAAnF,OAAoBnE,EAApB,KACRuJ,OAAQ,WAEVH,SAAS,MACTC,GAAG,MACHzE,MAAOI,EACP0C,QAAS,kBAAMtE,EAAMoG,cAAcrK,EAAOa,MAEzCb,EAAOwC,KAAKrC,QAAU,GACnBH,EAAOwC,KACPxC,EAAOwC,KAAK8H,MAAM,EAAG,IAAM,SAC/B/F,EAAAC,EAAAC,cAAA,aAAQzE,EAAOwC,OAEjB+B,EAAAC,EAAAC,cAAA,SACG7F,EAAMgB,IAAI,SAACJ,GACV,IAlMGmD,EAkMG4H,GAlMH5H,EAkMyBnD,EAjMlDgL,KAAK3H,IAAIoB,EAAMwG,iBAAkBpF,EAAO1C,EAAE1B,UAAYoE,EAAO1C,EAAExB,cAkMzC,OACEoD,EAAAC,EAAAC,cAAA,KACE3E,IAAKN,EAAKqB,GACV+H,UAAW/D,EACTQ,EAAO7F,EAAK2B,YACZ6F,IAGFzC,EAAAC,EAAAC,cAAA,QACEiG,GAAG,IACHvC,UAAWK,IAAG,YAAahJ,EAAKV,OAAOuD,MACvCkG,QAAS,kBAAMtE,EAAMoG,cAAcrK,EAAOa,KAC1C8J,aAAc,kBACZtD,EAAS,CAAE7H,KAAMA,EAAMU,MAAOA,KAEhCwJ,KACEkB,MAAML,GAAN,sBAAAvF,OAC0BnE,EAD1B,KAEI0E,EAAW/F,EAAKV,OAAOuD,MAE7B6G,OACE9B,GAASA,EAAM5H,OAASA,EACpB,QACA,QAENuK,cACE3C,GAASA,EAAM5H,OAASA,EAAO,EAAI,GAErC2J,YACE/B,GAASA,EAAM5H,OAASA,EAAO,EAAI,EAErCiG,MAAOmF,MAAML,GAAK,OAASA,EAC3B3E,OAAQmB,EACRhC,EAAG,EACHD,EAAG,eAa1BsC,GACC7C,EAAAC,EAAAC,cAAA,OACE0D,UAAU,oBACVC,MAAO,CACLQ,UAAS,aAAA5D,OAAeK,EAAO+B,EAAM5H,KAAK2B,YAAjC,QAAA6D,OACPuB,EAAOa,EAAMlH,OAAS+D,EAAM0B,WADrB,SAMXpB,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,WACbf,EAAM5H,KAAKuB,SADd,MAC2BqG,EAAM5H,KAAKV,OAAOsC,WAD7C,KAC2D,IACxD8D,EAASkC,EAAM5H,KAAK2B,YAFvB,MAEuC,IACpC+D,EAASkC,EAAM5H,KAAKyB,eCzStB4J,UAER,SAAC5G,GACgBA,EAAZ6G,QACR,OACEvG,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuG,SAAA,KACExG,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,WACb5D,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,YACd5D,EAAAC,EAAAC,cAAA,OAAKuG,IAAI,qBACTzG,EAAAC,EAAAC,cAACwG,EAAA,KAAD,CAAMC,GAAG,KAAT,mBCIJC,EAAWC,YAAK,SAAC5G,EAAS6G,GAAV,OAAsB7G,EAAI6G,IAC1CC,EAAapF,YACjB,SAAC4B,EAAalH,GAAd,OAA2BA,EAAEK,UAAYL,EAAEO,WAAa2G,GACxD,GAEIyD,EAAe,CACnBC,SAAUJ,YACR,SAAAhF,EAAAqF,GAAA,IAAIC,EAAJzI,OAAAoB,EAAA,EAAApB,CAAAmD,EAAA,MAAgBuF,EAAhB1I,OAAAoB,EAAA,EAAApB,CAAAwI,EAAA,aAA4BH,EAAWK,GAAUL,EAAWI,KAE9DE,KAAMR,YACJ,SAAA9B,EAAAC,GAAA,IAAImC,EAAJzI,OAAAoB,EAAA,EAAApB,CAAAqG,EAAA,MAAgBqC,EAAhB1I,OAAAoB,EAAA,EAAApB,CAAAsG,EAAA,aACG4B,EAASO,EAAO9L,IAAI,SAACgB,GAAD,OAAOA,EAAEO,cAAa,IAC1CgK,EAASQ,EAAO/L,IAAI,SAACgB,GAAD,OAAOA,EAAEO,cAAa,KAE/CqB,KAAMkF,YAAO,SAAAmE,GAAA,OAAA5I,OAAAoB,EAAA,EAAApB,CAAA4I,EAAA,MAAqBrJ,OAClCxB,UAAW0G,YAAO,SAAAoE,GAAA,OAAA7I,OAAAoB,EAAA,EAAApB,CAAA6I,EAAA,MAAqB9K,aAEnC+K,GAAkBX,YAAK,SAAC5G,EAAS6G,GAAV,OAAsB7G,EAAErD,WAAakK,EAAElK,aAC9D6K,GAAiB,SAACC,GAAD,OACrBA,EAAGrM,IAAI,SAACsM,GAAD,MACL,CAEEA,EAAE,GACFH,GAAgBG,EAAE,IAAIhG,OAAO,SAAC4B,EAAalH,GACzC,GAAKkH,GAAsB,IAAfA,EAAI3H,OACX,CACH,IAAMgM,EAAiBrE,EAAIA,EAAI3H,OAAS,GACxC,GAAIgM,EAASlL,SAAWL,EAAEO,WAExB,GAAIgL,EAASrN,OAAO8I,UAAYhH,EAAE9B,OAAO8I,SAAU,CACjD,IAAMzG,EAAagL,EAASlL,UAExBE,KAAgBgL,EAASlL,WACxBL,EAAEK,YAAckL,EAASlL,WAC3BE,GAAcP,EAAEK,SAEjB7B,QAAQgN,KAAK,iCAAkCxL,GAE5CkH,EAAIuE,KAAJpJ,OAAAC,EAAA,EAAAD,CAAA,GAAcrC,EAAd,CAAiBO,qBAGtBgL,EAASlL,SAAWL,EAAEO,WACtB2G,EAAIuE,KAAJpJ,OAAAC,EAAA,EAAAD,CAAA,GAAcrC,SAEXkH,EAAIuE,KAAJpJ,OAAAC,EAAA,EAAAD,CAAA,GAAcrC,IACrB,OAAOkH,EArBqB,MAAO,CAAC7E,OAAAC,EAAA,EAAAD,CAAA,GAAKrC,KAuB1C,QAIH0L,GAOF,SAACrI,GAAU,IACLsI,EAAqBtI,EAArBsI,QAASzB,EAAY7G,EAAZ6G,QACXT,EAAgBmC,sBACpB,SAAC/M,GACC8M,EAAQF,KAAR,YAAArH,OAAyBvF,KAE3B,CAAC8M,IAGGzJ,EAAkCkJ,GACtCS,MAAMC,KAAK5B,EAAQhI,YAAY6J,iBAE3BxK,EAA+B6J,GACnCS,MAAMC,KAAK5B,EAAQ3I,SAASwK,iBAIxBtJ,EAA2BmC,kBAC/B,oBAAAR,OAAA/B,OAAA+E,EAAA,EAAA/E,CAAUH,GAAVG,OAAA+E,EAAA,EAAA/E,CAA0Bd,KAC1B,CAACW,EAAaX,IAEVyK,EAAUlK,YAAIW,EAAM,SAAAwJ,GAAA,OAAA5J,OAAAoB,EAAA,EAAApB,CAAA4J,EAAA,MAAIpK,QACxBqK,EAAUjK,YAAIQ,EAAM,SAAA0J,GAAA,OAAA9J,OAAAoB,EAAA,EAAApB,CAAA8J,EAAA,MAAInK,MACxByC,EAAS2H,cAAYvG,OAAO,CAACmG,EAASE,IAEpC7N,EAAkCgO,qBAAWlO,GAA7CE,MACFsG,EAAa2H,YAAa,CAC9B,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACCzG,OAAOxD,OAAOkK,KAAKlO,EAAMH,QAAQc,IAAI,SAAC0I,GAAD,OAAOrJ,EAAMH,OAAOwJ,GAAGjG,QA/ClD4E,EAiDiBC,qBAjDjBC,EAAAlE,OAAAoB,EAAA,EAAApB,CAAAgE,EAAA,GAiDNmG,EAjDMjG,EAAA,GAiDGkG,EAjDHlG,EAAA,GAkDPmG,EAAkB/B,EAAa6B,GAAW,QAAQjL,GAExD,OACEoC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuG,SAAA,KACExG,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC8I,EAAD,CAASzC,QAASA,IAClBvG,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,eAAe2C,EAAQtI,MACrC+B,EAAAC,EAAAC,cAAA,uBAAeqG,EAAQjK,IACvB0D,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAC+I,EAAD,CACEnD,cAAeA,EACfI,iBAAkB,EAClBpH,KAAMP,EACNwC,QAASwF,EAAQhI,YAAY2K,UAC7B9H,WAAY,GACZF,MAAO,IACPJ,OAAQA,EACRE,WAAYA,IAGdhB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,0BAAkBqG,EAAQ3I,SAASsL,UAAnC,aACAlJ,EAAAC,EAAAC,cAAA,sBACU,IACRF,EAAAC,EAAAC,cAACiJ,EAAA,EAAD,CACEvF,UAAU,eACVwF,SAAU,SAAChG,GAAD,OAAO0F,EAAW1F,EAAEhD,QAC9BiJ,aAAc,CAAEjJ,MAAO,OAAQkJ,MAAO,cACtCC,MAAO,SAACA,GAAD,OAAA7K,OAAAC,EAAA,EAAAD,CAAA,GACF6K,EADE,CAELC,aAAc,EACdC,OAAO/K,OAAAC,EAAA,EAAAD,CAAA,GACF6K,EAAME,OADL,CAEJC,UAAW,YACXC,QAAS,OACTC,WAAY,QACZC,MAAO,aAGXC,cAAc,EACdC,QAAS,CACP,CAAE3J,MAAO,OAAQkJ,MAAO,cACxB,CAAElJ,MAAO,WAAYkJ,MAAO,YAC5B,CAAElJ,MAAO,OAAQkJ,MAAO,eACxB,CAAElJ,MAAO,YAAakJ,MAAO,kBAMrCtJ,EAAAC,EAAAC,cAAC+I,EAAD,CACEnD,cAAeA,EACfI,iBAAkB,EAClBpH,KAAMiK,EACNhI,QAASwF,EAAQ3I,SAASsL,UAC1B9H,WAAY,GACZF,MAAO,IACPJ,OAAQA,EACRE,WAAYA,EACZhG,QAAqB,cAAZ6N,EAA0B,iBAAcnN,OAiB5CsO,GAVA,SAACtK,GACd,IAAMpD,EAAKoD,EAAMuK,MAAMC,OAAO5N,GAExBiK,EADoCmC,qBAAWlO,GAA7CE,MACcJ,SAAS6P,KAAK,SAAC1O,GAAD,OAAYgC,YAAOhC,EAAOa,GAAIA,KAClE,YAAgBZ,IAAZ6K,EACKvG,EAAAC,EAAAC,cAAA,sBAEFF,EAAAC,EAAAC,cAACkK,GAAD1L,OAAA2L,OAAA,GAAa3K,EAAb,CAAoB6G,QAASA,eCrLhC+D,GAAqBjP,YAAI,SAACkL,GAAD,MAAsB,CACnDnG,MAAOmG,EAAQjK,GACfgN,MAAO/C,EAAQtI,QAGXsM,GAAmB1D,YACvB,SAAC5G,EAAW6G,GAAZ,OAA0BA,EAAEvI,YAAY4D,KAAOlC,EAAE1B,YAAY4D,OAGzDqI,GAASC,YAAO,EAAG,CAAC,cAAe,MAAO,WAE1CC,GAAqB7D,YACzB,SAAC5G,EAAW6G,GAAZ,OAA0B0D,GAAO1D,GAAK0D,GAAOvK,KAgBzC0K,GAAWC,YAAK,GAEhBC,GAA6C,SAACnL,GAClD,IAAMoL,EAAyBH,GAASJ,GAAiB7K,EAAMpF,WACzDyQ,EAA0BJ,GAASD,GAAmBhL,EAAMpF,WAC5D0Q,EAAuBL,GAlBP,SAACrQ,GACvB,IAAM2Q,EAAmBpE,YACvB,SAAC5G,EAAU6G,GAAX,OAAwBA,EAAEpK,SAAWuD,EAAEvD,WAGzC,OADsBmK,YAAK,SAAC5G,EAAW6G,GAAZ,OAA0BA,EAAEzI,IAAM4B,EAAE5B,KACxD6M,CACL5Q,EAASkD,OACP,SAAC4F,GAAD,MACmE,QAAjE6H,EAAiBvM,OAAA+E,EAAA,EAAA/E,CAAI0E,EAAE7E,YAAYP,WAAW,GAAGzD,OAAOuD,QAUxBqN,CAAgBzL,EAAMpF,WAEtD8Q,EAAa,IAAIC,KAAKC,eAAe,QAAS,CAAEjE,KAAM,YAC5D,OACErH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,QACb5D,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,QACb5D,EAAAC,EAAAC,cAAA,0CACAF,EAAAC,EAAAC,cAAA,UACG4K,EAAazP,IAAI,SAACI,GAAD,OAChBuE,EAAAC,EAAAC,cAAA,MAAI3E,IAAKE,EAAOa,IACd0D,EAAAC,EAAAC,cAACwG,EAAA,KAAD,CAAMC,GAAE,YAAAlG,OAAchF,EAAOa,KAC1Bb,EAAOwC,KADV,MACmBxC,EAAO8C,YAAY4D,KADtC,oBAORnC,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,QACb5D,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAA,UACG6K,EAAc1P,IAAI,SAACI,GAAD,OACjBuE,EAAAC,EAAAC,cAAA,MAAI3E,IAAKE,EAAOa,IACd0D,EAAAC,EAAAC,cAACwG,EAAA,KAAD,CAAMC,GAAE,YAAAlG,OAAchF,EAAOa,KAC1Bb,EAAOwC,KADV,MACmBuM,GAAO/O,GAD1B,kBAORuE,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,QACb5D,EAAAC,EAAAC,cAAA,qCACAF,EAAAC,EAAAC,cAAA,UACG8K,EAAW3P,IAAI,SAACI,GAAD,OACduE,EAAAC,EAAAC,cAAA,MAAI3E,IAAKE,EAAOa,IACd0D,EAAAC,EAAAC,cAACwG,EAAA,KAAD,CAAMC,GAAE,YAAAlG,OAAchF,EAAOa,KAC1Bb,EAAOwC,KADV,MACmBmN,EAAWG,OAAO9P,EAAO4C,cA4BtDmN,GAA8B,SAAC9L,GAAU,IACrChF,EAAkCgO,qBAAWlO,GAA7CE,MACF0O,EAAWnB,sBACf,SAACwD,GACC/L,EAAMsI,QAAQF,KAAd,YAAArH,OAA+BgL,EAAMrL,SAEvC,CAACV,EAAMsI,UAET,OACEhI,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuG,SAAA,KACExG,EAAAC,EAAAC,cAAC8I,EAAD,MAEAhJ,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,6BACb5D,EAAAC,EAAAC,cAAA,+CAEEF,EAAAC,EAAAC,cAAA,WAFF,kCAKAF,EAAAC,EAAAC,cAAA,2EACkE,IAChEF,EAAAC,EAAAC,cAAA,2CAFF,OAEkC,IAChCF,EAAAC,EAAAC,cAAA,mEAHF,6BAIW,IACTF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,iEAAR,UAEK,IAPP,MAQM,IACJ1L,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,wEAAR,gBAEK,IAXP,uVAkBA1L,EAAAC,EAAAC,cAAA,oBACUF,EAAAC,EAAAC,cAACyL,GAAA,SAAD,CAAUhF,GAAG,gBAAb,eADV,OACiE,IAC/D3G,EAAAC,EAAAC,cAACyL,GAAA,SAAD,CAAUhF,GAAG,YAAb,YAFF,4BAKA3G,EAAAC,EAAAC,cAAA,MAAI5D,GAAG,WAAP,iCAEA0D,EAAAC,EAAAC,cAACiJ,EAAA,EAAD,CACEyC,YACElR,EAAMJ,SAASsB,OACX,mCACA,gBAENwN,SAAUA,EACVW,QAASO,GAAmB5P,EAAMJ,UAClCiP,MAAO,SAACA,GAAD,OAAA7K,OAAAC,EAAA,EAAAD,CAAA,GACF6K,EADE,CAELC,aAAc,EACdC,OAAO/K,OAAAC,EAAA,EAAAD,CAAA,GACF6K,EAAME,OADL,CAEJC,UAAW,YACXC,QAAS,OACTC,WAAY,QACZC,MAAO,eAIZnP,EAAMJ,SAASsB,OACdoE,EAAAC,EAAAC,cAAC2L,GAAD,CAAUvR,SAAUI,EAAMJ,WAE1B0F,EAAAC,EAAAC,cAAA,qCAGFF,EAAAC,EAAAC,cAAA,4EACAF,EAAAC,EAAAC,cAAA,2JAGMF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,gCAAR,UAHN,mTASA1L,EAAAC,EAAAC,cAAA,UACE4L,MAAM,mDACNrF,IAAI,kBAENzG,EAAAC,EAAAC,cAAA,KAAG2D,MAAO,CAAEkI,UAAW,WACrB/L,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,iBAAR,oCAEF1L,EAAAC,EAAAC,cAAA,MAAI5D,GAAG,eAAP,eACA0D,EAAAC,EAAAC,cAAA,i0BAcAF,EAAAC,EAAAC,cAAA,mEAC0D,IACxDF,EAAAC,EAAAC,cAAA,qMAGoC,IAClCF,EAAAC,EAAAC,cAAA,wFAJF,4BASEF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,iDAAR,iDATF,IAaE1L,EAAAC,EAAAC,cAAA,QACE0D,UAAU,QACVkI,MAAM,+qBAIZ9L,EAAAC,EAAAC,cAAA,MAAI5D,GAAG,WAAP,uBACA0D,EAAAC,EAAAC,cAAA,oEAEEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,gCAAR,yBADF,qDAIA1L,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,kCAAR,2BAEK,IAHP,2BAMA1L,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,mDAAR,4CAEK,IAHP,2DASJ1L,EAAAC,EAAAC,cAAA,iEACwD,IACtDF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,0CAAR,sCAIF1L,EAAAC,EAAAC,cAAA,SACG,IADH,uBAGEF,EAAAC,EAAAC,cAAA,yHAEuC,IACrCF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,yCAAR,0CAIF1L,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,0CACN1L,EAAAC,EAAAC,cAAA,OACEuG,IAAI,0DACJuF,IAAI,aAwBHC,GAfO,WACpB,OACEjM,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,OACb5D,EAAAC,EAAAC,cAACgM,EAAD,KACElM,EAAAC,EAAAC,cAACwG,EAAA,WAAD,CACEyF,SAAkD,eAElDnM,EAAAC,EAAAC,cAACkM,EAAA,EAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,UAAWf,KACjCxL,EAAAC,EAAAC,cAACkM,EAAA,EAAD,CAAOC,KAAK,eAAeE,UAAWxE,SC1R5ByE,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAS1C,MACvB,2DCZN2C,IAASC,OAAO7M,EAAAC,EAAAC,cAAC4M,GAAD,MAASC,SAASC,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMhO,KAAK,SAAAiO,GACjCA,EAAaC","file":"static/js/main.d96eab6a.chunk.js","sourcesContent":["import { csv, DSVRowArray, max, min, values } from \"d3\";\nimport { MultiMap } from \"mnemonist\";\nimport equals from \"ramda/es/equals\";\nimport filter from \"ramda/es/filter\";\nimport flatten from \"ramda/es/flatten\";\nimport groupBy from \"ramda/es/groupBy\";\nimport map from \"ramda/es/map\";\nimport mapObjIndexed from \"ramda/es/mapObjIndexed\";\nimport pipe from \"ramda/es/pipe\";\nimport React, { createContext, useEffect, useReducer } from \"react\";\nimport { action, ActionType } from \"typesafe-actions\";\nimport uuid from \"uuid\";\n\nconst initialState: GlobalState = {\n  links: [],\n  entities: [],\n  status: {},\n};\n\ninterface AppContext {\n  state: any;\n  dispatch: (action: any) => any;\n}\n\nexport const AppContext = createContext<AppContext>({\n  state: initialState,\n  dispatch: (arg) => {\n    console.log(\"not la bonne fonction poto\", arg);\n  },\n});\n\nconst groupByGPHCode = groupBy((link: Link) => link.GPH_code);\n\nconst toMap = (\n  object: { [key: string]: Link[] },\n  entities: { [key: string]: Entity }\n) => {\n  const map = new MultiMap<Entity, Link>();\n  for (const key in object) {\n    if (object.hasOwnProperty(key)) {\n      const links = object[key];\n      const entity = entities[key];\n      if (entity === undefined) {\n        continue;\n      }\n      for (let index = 0; index < links.length; index++) {\n        const link = links[index];\n        map.set(entity, link);\n      }\n    }\n  }\n  return map;\n};\n\nconst reducer = (state: GlobalState, action: ActionType<any>) => {\n  switch (action.type) {\n    case \"LOADED\": {\n      const linkPayload = action.payload[0];\n      const statusPayload = action.payload[1];\n      const links: WLink[] = linkPayload.map((csvLink: CSVLink) => {\n        const l = {\n          id: uuid() as string,\n          GPH_code: csvLink.GPH_code,\n          GPH_name: csvLink.GPH_name,\n          continent: csvLink.continent,\n          end_year: new Date(csvLink.end_year),\n          start_year: new Date(csvLink.start_year),\n          status: statusPayload[csvLink.GPH_status],\n          sovereign: {\n            GPH_code: csvLink.sovereign_GPH_code,\n            GPH_name: csvLink.sovereign_GPH_name,\n          },\n        } as WLink;\n        if (!l.status) console.error(\"unknown link type\", csvLink);\n        return l;\n      });\n      const entitiesMap = groupByGPHCode(links);\n      const wEntities: { [key: string]: Entity } = mapObjIndexed(\n        (ownLinks: Link[], GPH_code: GPH_code) => {\n          const selectOccupations = pipe(\n            filter((link: WLink) => equals(link.GPH_code, GPH_code)),\n            groupBy((link: WLink) => link.sovereign.GPH_code || GPH_code)\n          );\n          const selectCampains = pipe(\n            filter((link: WLink) => equals(link.sovereign.GPH_code, GPH_code)),\n            groupByGPHCode\n          );\n          const occ = selectOccupations(ownLinks);\n          const campains = selectCampains(links);\n          const capMap = groupBy(\n            (link) => link.status.slug,\n            flatten(values(campains))\n          );\n          return {\n            id: GPH_code,\n            name: entitiesMap[GPH_code][0].GPH_name,\n            continent: entitiesMap[GPH_code][0].continent,\n            start: min(ownLinks, (d) => d.start_year),\n            end: max(ownLinks, (d) => d.end_year),\n            occupations: occ,\n            campains: campains,\n            campainsMap: capMap,\n          };\n        },\n        entitiesMap\n      );\n      const wMapEntities = map(\n        (entity: WEntity) => ({\n          ...entity,\n          occupations: toMap(entity.occupations, wEntities),\n          campains: toMap(entity.campains, wEntities),\n        }),\n        wEntities\n      );\n      links.forEach((link: WLink) => {\n        link.sovereign = wMapEntities[link.sovereign.GPH_code];\n      });\n      return {\n        links: links as unknown as Link[],\n        entities: values(wMapEntities),\n        status: statusPayload,\n      };\n    }\n  }\n  return state;\n};\n\nconst loadedActionCreator = (data: DSVRowArray<string>) =>\n  action(\"LOADED\", data);\n\nconst entitiesStatusPromise = csv(\n  \"./data/GeoPolHist_entities_status_over_time.csv\"\n);\nconst statusPromise = fetch(\"./data/GPH_status.json\").then((response) =>\n  response.json()\n);\nconst dataPromise = Promise.all([entitiesStatusPromise, statusPromise]);\nconst AppContextProvider: React.FC = (props: any) => {\n  const [state, dispatch] = useReducer(reducer, initialState as never);\n  useEffect(() => {\n    dataPromise.then(pipe(loadedActionCreator, dispatch));\n  }, []);\n  return (\n    <AppContext.Provider value={{ state, dispatch: dispatch }}>\n      {props.children}\n    </AppContext.Provider>\n  );\n};\n\nexport default AppContextProvider;\n","\nexport const xGPHName = (link: Link) => link.GPH_name;\n// export const xSovereignCowName = (link: Link) => link.sovereign_COW_name;\n// export const xType = (link: Link) => link.link_type === 'Sovereign';\n\nexport const translate = (x: number, y: number) => `translate(${x}, ${y})`\n","import cx from \"classnames\";\nimport {\n  ScaleOrdinal,\n  ScaleTime,\n  axisBottom,\n  axisTop,\n  scaleLinear,\n  select,\n  timeFormat,\n} from \"d3\";\nimport sortBy from \"ramda/es/sortBy\";\nimport values from \"ramda/es/values\";\nimport React, { Fragment, useEffect, useMemo, useState } from \"react\";\nimport uuid from \"uuid\";\nimport \"./timeline.css\";\nimport { translate } from \"./utils\";\n\nconst margins = {\n  top: 0,\n  right: 0,\n  bottom: 50,\n  left: 0,\n};\nconst formater = timeFormat(\"%Y\");\n\nconst Timelines: React.FC<{\n  data: [Entity, Link[]][];\n  hideGroupLabels?: boolean;\n  intervalMinWidth: number;\n  lineHeight: number;\n  width: number;\n  onEntityClick: (GPH_code: string) => void;\n  xScale: ScaleTime<number, number>;\n  nbLines: number;\n  colorScale: ScaleOrdinal<string, string>;\n  groupBy?: \"continent\";\n}> = (props) => {\n  // useWhyDidYouUpdate('timeline', props);\n  const { xScale, data, nbLines, colorScale } = props;\n  const id = useMemo(uuid, []);\n  const width = props.width - margins.left - margins.right;\n  const elHeight = nbLines * props.lineHeight + margins.top + margins.bottom;\n  const height = elHeight - margins.top - margins.bottom;\n  const groupWidth = props.hideGroupLabels ? 0 : 200;\n  const groupHeight = height / data.length;\n  const intervalRectWidth = (d: Link) =>\n    Math.max(props.intervalMinWidth, xScale(d.end_year) - xScale(d.start_year));\n  xScale.range([groupWidth, width - 15]);\n\n  const continentsLabels =\n    props.groupBy === \"continent\"\n      ? data.reduce((continents, [entity]) => {\n          continents.add(entity.continent);\n          return continents;\n        }, new Set<string>())\n      : undefined;\n  const yScale = scaleLinear()\n    .domain([0, nbLines + (continentsLabels ? continentsLabels.size : 0)])\n    .range([0, height]);\n\n  const xAxisTop = axisTop(xScale);\n  const xAxisBottom = axisBottom(xScale);\n  const intervalBarHeight = 0.8 * groupHeight;\n  const intervalBarMargin = (groupHeight - intervalBarHeight) / 2;\n  const [hover, setHover] = useState<{ link: Link; index: number }>();\n  const [status, setStatus] = useState<any>();\n  const sortStatus = sortBy((e) => e.priority + e.GPH_status);\n  const groupedByStatus = sortStatus(\n    values(\n      data\n        .reduce((acc, [, links]: [Entity, Link[]]) => [...acc, ...links], [])\n        .reduce((acc, link: Link) => {\n          acc[link.status.slug] = link.status;\n          return acc;\n        }, {})\n    )\n  ).reverse();\n\n  useEffect(\n    () => () => {\n      setHover(null);\n      setStatus(null);\n    },\n    [props.data]\n  );\n\n  // shift line when inserting continent labels\n  let indexShift = 0;\n\n  return (\n    <div\n      className=\"timelines-container\"\n      style={{ width: width }}\n      onMouseLeave={() => setHover(null)}\n    >\n      <div className=\"legend\">\n        <div className=\"legend-container\">\n          {groupedByStatus.map((s: Status) => (\n            <span\n              key={s.slug}\n              onClick={() => {\n                status === s.slug ? setStatus(null) : setStatus(s.slug);\n              }}\n              className={cx({\n                \"legend-item\": true,\n                \"legend-item--hidden\": status && status !== s.slug,\n              })}\n            >\n              <div\n                className=\"colorLegendItem\"\n                style={\n                  { backgroundColor: colorScale(s.slug) } as React.CSSProperties\n                }\n              ></div>\n              <span>{s.GPH_status}</span>\n            </span>\n          ))}\n        </div>\n        <svg height={20} width={props.width}>\n          <g transform={translate(margins.left, margins.top)}>\n            <g\n              transform={translate(0, 17)}\n              ref={(element) => {\n                if (element) {\n                  select(element).call(xAxisTop);\n                }\n              }}\n            />\n          </g>\n        </svg>\n      </div>\n      <div className=\"timeline\">\n        <svg height={elHeight} width={props.width}>\n          <g transform={translate(margins.left, margins.top)}>\n            <defs>\n              <pattern\n                id={`diagonalHatch-${id}`}\n                patternUnits=\"userSpaceOnUse\"\n                width=\"4\"\n                height=\"4\"\n              >\n                <path\n                  d=\"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\"\n                  style={{ stroke: \"black\", strokeWidth: 1 }}\n                />\n              </pattern>\n              <clipPath id={`name-area-${id}`}>\n                <rect x={0} y={0} height={height} width={groupWidth} />\n              </clipPath>\n            </defs>\n            <g\n              transform={translate(0, height)}\n              ref={(element) => {\n                if (element) {\n                  select(element).call(xAxisBottom);\n                }\n              }}\n            />\n            <g\n              className={cx(\n                {\n                  group: true,\n                  has_status: !!status,\n                },\n                status\n              )}\n            >\n              {data.map(([entity, links], index) => {\n                const showContinent =\n                  props.groupBy === \"continent\" &&\n                  (index === 0 ||\n                    entity.continent !== data[index - 1][0].continent);\n\n                if (showContinent && props.groupBy === \"continent\") {\n                  indexShift += 1;\n                }\n                return (\n                  <Fragment key={entity.name}>\n                    {props.groupBy === \"continent\" && showContinent && (\n                      <g\n                        key={entity.continent}\n                        className=\"continent\"\n                        transform={translate(0, yScale(index + indexShift - 1))}\n                      >\n                        {\" \"}\n                        <rect fill=\"#ccc\" width=\"100%\" height=\"1.2em\" />\n                        <line\n                          className=\"group-separator\"\n                          x1={0}\n                          x2={width}\n                          y1={0}\n                          y2={0}\n                          stroke=\"black\"\n                          strokeOpacity={0.1}\n                        />\n                        <text\n                          x=\"50%\"\n                          textAnchor=\"middle\"\n                          fontSize=\"1em\"\n                          dy=\"1em\"\n                          className=\"continentLabel\"\n                        >\n                          {entity.continent}\n                          <title>{entity.continent}</title>\n                        </text>\n                      </g>\n                    )}\n                    <g\n                      key={entity.name}\n                      className={entity.name}\n                      transform={translate(0, yScale(index + indexShift))}\n                    >\n                      <line\n                        className=\"group-separator\"\n                        x1={0}\n                        x2={width}\n                        y1={0}\n                        y2={0}\n                        stroke=\"black\"\n                        strokeOpacity={0.1}\n                      />\n                      <text\n                        className=\"entity-label\"\n                        style={{\n                          clipPath: `url(#name-area-${id})`,\n                          cursor: \"pointer\",\n                        }}\n                        fontSize=\"1em\"\n                        dy=\"1em\"\n                        width={groupWidth}\n                        onClick={() => props.onEntityClick(entity.id)}\n                      >\n                        {entity.name.length <= 22\n                          ? entity.name\n                          : entity.name.slice(0, 22) + \"…\"}\n                        <title>{entity.name}</title>\n                      </text>\n                      <g>\n                        {links.map((link: Link) => {\n                          const w = intervalRectWidth(link);\n                          return (\n                            <g\n                              key={link.id}\n                              transform={translate(\n                                xScale(link.start_year),\n                                intervalBarMargin\n                              )}\n                            >\n                              <rect\n                                rx=\"5\"\n                                className={cx(\"link-rect\", link.status.slug)}\n                                onClick={() => props.onEntityClick(entity.id)}\n                                onMouseEnter={() =>\n                                  setHover({ link: link, index: index })\n                                }\n                                fill={\n                                  isNaN(w)\n                                    ? `url(#diagonalHatch-${id})`\n                                    : colorScale(link.status.slug)\n                                }\n                                stroke={\n                                  hover && hover.link === link\n                                    ? \"white\"\n                                    : \"black\"\n                                }\n                                strokeOpacity={\n                                  hover && hover.link === link ? 1 : 0.2\n                                }\n                                strokeWidth={\n                                  hover && hover.link === link ? 2 : 1\n                                }\n                                width={isNaN(w) ? \"100%\" : w}\n                                height={intervalBarHeight}\n                                y={0}\n                                x={0}\n                              />\n                            </g>\n                          );\n                        })}\n                      </g>\n                    </g>\n                  </Fragment>\n                );\n              })}\n            </g>\n          </g>\n        </svg>\n        {hover && (\n          <div\n            className=\"tooltip-container\"\n            style={{\n              transform: `translate(${xScale(hover.link.start_year)}px, ${\n                yScale(hover.index) - props.lineHeight\n              }px)`,\n              //minWidth: intervalRectWidth(hover.link)\n            }}\n          >\n            <span className=\"tooltip\">\n              {hover.link.GPH_name} - {hover.link.status.GPH_status} -{\" \"}\n              {formater(hover.link.start_year)} to{\" \"}\n              {formater(hover.link.end_year)}\n            </span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Timelines;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport const TopMenu: React.FC<{\n  country?: Entity;\n}> = (props) => {\n  const { country } = props;\n  return (\n    <>\n      <div className=\"topMenu\">\n        <span className=\"appTitle\">\n          <img src=\"./GeoPolHist.svg\" />\n          <Link to=\"/\">GeoPolHist</Link>\n        </span>\n      </div>\n    </>\n  );\n};\n","import equals from \"ramda/es/equals\";\nimport reduce from \"ramda/es/reduce\";\nimport sort from \"ramda/es/sort\";\nimport sortBy from \"ramda/es/sortBy\";\nimport React, { useCallback, useContext, useMemo, useState } from \"react\";\n\nimport { max, min, scaleOrdinal, scaleTime } from \"d3\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { AppContext } from \"./AppContext\";\nimport Timelines from \"./timeline\";\n\nimport \"./Country.css\";\n\nimport Select from \"react-select\";\nimport { TopMenu } from \"./TopMenu\";\n\nconst sortDate = sort((a: Date, b: Date) => a > b);\nconst countYears = reduce(\n  (acc: number, l: Link) => +l.end_year - +l.start_year + acc,\n  0\n);\nconst orderMethods = {\n  duration: sort(\n    ([, aLinks], [, bLinks]) => countYears(bLinks) - countYears(aLinks)\n  ),\n  year: sort(\n    ([, aLinks], [, bLinks]) =>\n      +sortDate(aLinks.map((l) => l.start_year))[0] -\n      +sortDate(bLinks.map((l) => l.start_year))[0]\n  ),\n  name: sortBy(([entity]) => entity.name),\n  continent: sortBy(([entity]) => entity.continent),\n};\nconst sortByStartYear = sort((a: Link, b: Link) => a.start_year > b.start_year);\nconst deOverlapLinks = (os: [Entity, Link[]][]) =>\n  os.map((o: [Entity, Link[]]) =>\n    // rewrite links for every object\n    [\n      o[0],\n      sortByStartYear(o[1]).reduce((acc: Link[], l: Link) => {\n        if (!acc || acc.length === 0) return [{ ...l }];\n        else {\n          const previous: Link = acc[acc.length - 1];\n          if (previous.end_year > l.start_year) {\n            // manage overlap\n            if (previous.status.priority >= l.status.priority) {\n              const start_year = previous.end_year;\n              if (\n                (+start_year === +previous.end_year &&\n                  +l.end_year === +previous.end_year) ||\n                +start_year > +l.end_year\n              )\n                console.warn(\"one overlapping status removed\", l);\n              // add l but modify start_year\n              else acc.push({ ...l, start_year });\n            } else {\n              // previous is a copy we can mute it\n              previous.end_year = l.start_year;\n              acc.push({ ...l });\n            }\n          } else acc.push({ ...l });\n          return acc;\n        }\n      }, []),\n    ]\n  );\n\nconst Country: React.FC<\n  {\n    id: string;\n    country: Entity;\n  } & RouteComponentProps<{\n    id: string;\n  }>\n> = (props) => {\n  const { history, country } = props;\n  const onEntityClick = useCallback(\n    (GPH_code) => {\n      history.push(`/country/${GPH_code}`);\n    },\n    [history]\n  );\n\n  const occupations: [Entity, Link[]][] = deOverlapLinks(\n    Array.from(country.occupations.associations())\n  ) as [Entity, Link[]][];\n  const campains: [Entity, Link[]][] = deOverlapLinks(\n    Array.from(country.campains.associations())\n  ) as [Entity, Link[]][];\n\n  // deoverlap links\n  const data: [Entity, Link[]][] = useMemo(\n    () => [...occupations, ...campains],\n    [occupations, campains]\n  );\n  const minDate = min(data, ([{ start }]) => start);\n  const maxDate = max(data, ([{ end }]) => end);\n  const xScale = scaleTime().domain([minDate, maxDate]);\n  // color scale generated thanks to @jacomyma tools iwanthue\n  const { state }: { state: GlobalState } = useContext(AppContext);\n  const colorScale = scaleOrdinal([\n    \"#cd7f3d\",\n    \"#af49d8\",\n    \"#65da57\",\n    \"#d84397\",\n    \"#cbe240\",\n    \"#6c6cd4\",\n    \"#a3ca63\",\n    \"#ad63ab\",\n    \"#489046\",\n    \"#d74433\",\n    \"#6cdaaf\",\n    \"#c15b67\",\n    \"#86c5d8\",\n    \"#d8b94f\",\n    \"#6779a8\",\n    \"#787938\",\n    \"#d4a8cc\",\n    \"#4f8178\",\n    \"#cdcea7\",\n    \"#997462\",\n  ]).domain(Object.keys(state.status).map((s) => state.status[s].slug));\n  // sort select handler\n  const [orderBy, setOrderBy] = useState<any>();\n  const orderedCampains = orderMethods[orderBy || \"year\"](campains);\n\n  return (\n    <>\n      <div>\n        <TopMenu country={country} />\n        <h1 className=\"stickyTitle\">{country.name}</h1>\n        <p>GPH_code : {country.id}</p>\n        <h2>Political status</h2>\n        <Timelines\n          onEntityClick={onEntityClick}\n          intervalMinWidth={5}\n          data={occupations}\n          nbLines={country.occupations.dimension}\n          lineHeight={20}\n          width={1000}\n          xScale={xScale}\n          colorScale={colorScale}\n        />\n        {/* <Histogram width={1000} height={300} data={Array.from(country.campains.values())} /> */}\n        <div>\n          <h2>Sovereign of {country.campains.dimension} entities</h2>\n          <span>\n            sort by{\" \"}\n            <Select\n              className=\"inlineSelect\"\n              onChange={(e) => setOrderBy(e.value)}\n              defaultValue={{ value: \"year\", label: \"first date\" }}\n              theme={(theme) => ({\n                ...theme,\n                borderRadius: 5,\n                colors: {\n                  ...theme.colors,\n                  primary25: \"lightgrey\",\n                  primary: \"grey\",\n                  background: \"white\",\n                  color: \"black\",\n                },\n              })}\n              isSearchable={false}\n              options={[\n                { value: \"year\", label: \"first date\" },\n                { value: \"duration\", label: \"duration\" },\n                { value: \"name\", label: \"entity name\" },\n                { value: \"continent\", label: \"continent\" },\n              ]}\n            />\n          </span>\n        </div>\n\n        <Timelines\n          onEntityClick={onEntityClick}\n          intervalMinWidth={5}\n          data={orderedCampains}\n          nbLines={country.campains.dimension}\n          lineHeight={20}\n          width={1000}\n          xScale={xScale}\n          colorScale={colorScale}\n          groupBy={orderBy === \"continent\" ? \"continent\" : undefined}\n        />\n      </div>\n    </>\n  );\n};\n\nconst Loader = (props) => {\n  const id = props.match.params.id;\n  const { state }: { state: GlobalState } = useContext(AppContext);\n  const country = state.entities.find((entity) => equals(entity.id, id));\n  if (country === undefined) {\n    return <div>Loading</div>;\n  }\n  return <Country {...props} country={country} />;\n};\n\nexport default Loader;\n","import React, { useCallback, useContext } from \"react\";\nimport { map } from \"ramda\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport Select from \"react-select\";\nimport sort from \"ramda/es/sort\";\nimport take from \"ramda/es/take\";\nimport pathOr from \"ramda/es/pathOr\";\n\nimport \"./App.css\";\nimport Country from \"./Country\";\nimport AppContextProvider, { AppContext } from \"./AppContext\";\nimport { RouterProps } from \"react-router\";\nimport { TopMenu } from \"./TopMenu\";\n\nimport { HashLink } from \"react-router-hash-link\";\n\nconst countriesToOptions = map((country: Entity) => ({\n  value: country.id,\n  label: country.name,\n}));\n\nconst sortByOccupation = sort(\n  (a: Entity, b: Entity) => b.occupations.size - a.occupations.size\n);\n\nconst getCol = pathOr(0, [\"campainsMap\", \"col\", \"length\"]);\n\nconst sortByColonyNumber = sort(\n  (a: Entity, b: Entity) => getCol(b) - getCol(a)\n);\n\nconst filterSortByDis = (entities: Entity[]) => {\n  const sortByOccEndDate = sort(\n    (a: WLink, b: WLink) => b.end_year > a.end_year\n  );\n  const sortByEndDate = sort((a: Entity, b: Entity) => b.end > a.end);\n  return sortByEndDate(\n    entities.filter(\n      (e) =>\n        sortByOccEndDate([...e.occupations.values()])[0].status.slug === \"dis\"\n    )\n  );\n};\n\nconst takeTop5 = take(5);\n\nconst Examples: React.FC<{ entities: Entity[] }> = (props) => {\n  const mostOccupied: Entity[] = takeTop5(sortByOccupation(props.entities));\n  const mostCollonies: Entity[] = takeTop5(sortByColonyNumber(props.entities));\n  const disapeared: Entity[] = takeTop5(filterSortByDis(props.entities));\n\n  const yearFormat = new Intl.DateTimeFormat(\"en-GB\", { year: \"numeric\" });\n  return (\n    <div>\n      <div className=\"line\">\n        <div className=\"grow\">\n          <h3>Biggest number of sovereigns</h3>\n          <ol>\n            {mostOccupied.map((entity) => (\n              <li key={entity.id}>\n                <Link to={`/country/${entity.id}`}>\n                  {entity.name} - {entity.occupations.size} sovereigns\n                </Link>\n              </li>\n            ))}\n          </ol>\n        </div>\n        <div className=\"grow\">\n          <h3>Biggest number of colonies</h3>\n          <ol>\n            {mostCollonies.map((entity) => (\n              <li key={entity.id}>\n                <Link to={`/country/${entity.id}`}>\n                  {entity.name} - {getCol(entity)} colonies\n                </Link>\n              </li>\n            ))}\n          </ol>\n        </div>\n        <div className=\"grow\">\n          <h3>Most recently dissolved</h3>\n          <ol>\n            {disapeared.map((entity) => (\n              <li key={entity.id}>\n                <Link to={`/country/${entity.id}`}>\n                  {entity.name} - {yearFormat.format(entity.end)}\n                </Link>\n              </li>\n            ))}\n          </ol>\n        </div>\n      </div>\n      {/* <h3>Countries by status</h3>\n      <div className='line'>\n        {values(state.status).map(status => {\n          const getNb = pathOr(0, ['campainsMap', status.slug, 'length']);\n          const sortByStatus = sort((a, b) => getNb(b) - getNb(a));\n          return (\n            <div key={status.slug} className='grow'>\n              <h3>counties with most {status.GPH_status}:</h3>\n              <ol>\n                {takeTop5(sortByStatus(props.entities)).map(entity => {\n                  return <li key={entity.id}><Link to={`/country/${entity.id}`}>{entity.name}</Link></li>\n                })}\n              </ol>\n            </div>\n          );\n        })}\n      </div> */}\n    </div>\n  );\n};\n\nconst Home: React.FC<RouterProps> = (props) => {\n  const { state }: { state: GlobalState } = useContext(AppContext);\n  const onChange = useCallback(\n    (event) => {\n      props.history.push(`/country/${event.value}`);\n    },\n    [props.history]\n  );\n  return (\n    <>\n      <TopMenu />\n\n      <div className=\"container container--home\">\n        <h1>\n          Geopolitical entities of the world\n          <br />\n          by political status since 1816\n        </h1>\n        <p>\n          GeoPolHist is a quantitative tool that focuses on the questions{\" \"}\n          <b>“what is a country?”</b> and{\" \"}\n          <b>“how many countries are there in the world?”</b> Created from the\n          lists of{\" \"}\n          <a href=\"https://correlatesofwar.org/data-sets/state-system-membership\">\n            states\n          </a>{\" \"}\n          and{\" \"}\n          <a href=\"https://correlatesofwar.org/data-sets/colonial-dependency-contiguity\">\n            dependencies\n          </a>{\" \"}\n          built by the Correlates of War project, GeoPolHist provides a dataset\n          and visual documentation that identifies the political status of each\n          of the geopolitical entities that existed in the world since 1816. It\n          allows for an approach of the political history of the world based on\n          the dichotomy between sovereign and non-sovereign entities.\n        </p>\n        <p>\n          See the <HashLink to=\"#methodology\">methodology</HashLink> and{\" \"}\n          <HashLink to=\"#dataset\">data set</HashLink> sections to learn more.\n        </p>\n\n        <h2 id=\"explore\">Explore Geopolitical entities</h2>\n\n        <Select\n          placeholder={\n            state.entities.length\n              ? \"Search for a Geopolitical entity\"\n              : \"Still loading\"\n          }\n          onChange={onChange}\n          options={countriesToOptions(state.entities)}\n          theme={(theme) => ({\n            ...theme,\n            borderRadius: 5,\n            colors: {\n              ...theme.colors,\n              primary25: \"lightgrey\",\n              primary: \"grey\",\n              background: \"white\",\n              color: \"black\",\n            },\n          })}\n        />\n        {state.entities.length ? (\n          <Examples entities={state.entities} />\n        ) : (\n          <p>Data is still loading...</p>\n        )}\n\n        <h2>Three periods in the political history of the world since 1816</h2>\n        <p>\n          Over the last two centuries, the political situation of the world can\n          be described as a developmental process in three phases during which\n          one <a href=\"./data/GeoPolHist_status.csv\">status</a> predominated.\n          From 1816 to the Berlin Conference in 1884/85, 14% of the geopolitical\n          entities of the world were sovereign (unrecognized); from 1886 to\n          1949, 20% were ‘colony’, ‘possession or ‘protectorate’’; since 1950,\n          16% are ‘sovereign’ (in the strict sense).\n        </p>\n        <iframe\n          title=\"GPH status evolutions in 1816,1885,1950 and 2020\"\n          src=\"./sankey.html\"\n        ></iframe>\n        <p style={{ textAlign: \"center\" }}>\n          <a href=\"./sankey.html\">open the diagram in full screen</a>\n        </p>\n        <h2 id=\"methodology\">Methodology</h2>\n        <p>\n          A geopolitical entity is any form of human social community or\n          territory that has been involved in an international or intra-national\n          conflict during the post-Napoleonic period and is also territorially\n          based. These entities are “political” in the Aristotelian sense of the\n          political order, whose ultimate goal is to maintain peace through\n          justice within the entity, while war and conflicts remain a\n          possibility outside the limits of the entity. Throughout the period\n          covered by the GPH database, political entities of the “human social\n          community” type have taken the form of the tribe, chiefdom,\n          city-state, kingdom, empire, or nation. GPH entities may or may not be\n          sovereign and independent. Political entities of the “territory” type\n          are made up of uninhabited islands, atolls or reefs.\n        </p>\n        <p>\n          The GeoPolHist dataset is fully described in the paper:{\" \"}\n          <blockquote>\n            Dedinger, Béatrice, and Paul Girard, ‘How Many Countries in the\n            World? The Geopolitical Entities of the World and Their Political\n            Status from 1816 to the Present’,{\" \"}\n            <i>\n              Historical Methods: A Journal of Quantitative and\n              Interdisciplinary History\n            </i>\n            , 0.0 (2021), 1–20 &lt;\n            <a href=\"https://doi.org/10.1080/01615440.2021.1939826\">\n              https://doi.org/10.1080/01615440.2021.1939826\n            </a>\n            &gt;\n            <span\n              className=\"Z3988\"\n              title=\"url_ver=Z39.88-2004&amp;ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fzotero.org%3A2&amp;rft_id=info%3Adoi%2F10.1080%2F01615440.2021.1939826&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.atitle=How%20many%20countries%20in%20the%20world%3F%20The%20geopolitical%20entities%20of%20the%20world%20and%20their%20political%20status%20from%201816%20to%20the%20present&amp;rft.jtitle=Historical%20Methods%3A%20A%20Journal%20of%20Quantitative%20and%20Interdisciplinary%20History&amp;rft.volume=0&amp;rft.issue=0&amp;rft.aufirst=B%C3%A9atrice&amp;rft.aulast=Dedinger&amp;rft.au=B%C3%A9atrice%20Dedinger&amp;rft.au=Paul%20Girard&amp;rft.date=2021-07-02&amp;rft.pages=1-20&amp;rft.spage=1&amp;rft.epage=20&amp;rft.issn=0161-5440\"\n            ></span>\n          </blockquote>\n        </p>\n        <h2 id=\"dataset\">GeoPolHist data set</h2>\n        <p>\n          The GeoPolHist data set is published under ODbl licence:\n          <ul>\n            <li>\n              <a href=\"./data/GeoPolHist_status.csv\">GeoPolHist_status.csv</a> -\n              list of political status and their definition;\n            </li>\n            <li>\n              <a href=\"./data/GeoPolHist_entities.csv\">\n                GeoPolHist_entities.csv\n              </a>{\" \"}\n              - list of GPH entities;\n            </li>\n            <li>\n              <a href=\"./data/GeoPolHist_entities_status_over_time.csv\">\n                GeoPolHist_entities_status_over_time.csv\n              </a>{\" \"}\n              - list of GPH entities by political status over time;\n            </li>\n          </ul>\n        </p>\n\n        <p>\n          The data set is versioned and fully documented in the{\" \"}\n          <a href=\"https://github.com/medialab/GeoPolHist\">\n            GeoPolHist datapackage repository\n          </a>\n        </p>\n        <p>\n          {\" \"}\n          To cite the dataset:\n          <blockquote>\n            Béatrice Dedinger, & Paul Girard. (2021). GeoPolHist dataset\n            (Version 202103) [Data set]. Zenodo.{\" \"}\n            <a href=\"http://doi.org/10.5281/zenodo.4600809\">\n              http://doi.org/10.5281/zenodo.4600809\n            </a>\n          </blockquote>\n          <a href=\"https://doi.org/10.5281/zenodo.4600809\">\n            <img\n              src=\"https://zenodo.org/badge/DOI/10.5281/zenodo.4600809.svg\"\n              alt=\"DOI\"\n            />\n          </a>\n        </p>\n      </div>\n    </>\n  );\n};\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <AppContextProvider>\n        <Router\n          basename={process.env.NODE_ENV === \"production\" ? \"/GeoPolHist\" : \"/\"}\n        >\n          <Route path=\"/\" exact component={Home} />\n          <Route path=\"/country/:id\" component={Country} />\n        </Router>\n      </AppContextProvider>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}