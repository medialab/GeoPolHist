(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(21),o=n.n(i),s=(n(74),n(67)),l=n(34),u=n(20),m=n(66),d=(n(75),n(29)),f=n(13),O=n(68),p=n(7),b=n(60),g=n(30),y=n.n(g),h={"Became part of":{slug:"part",priority:2},"Became colony of":{slug:"col",priority:3},"Became possession of":{slug:"poss",priority:3},"Claimed by":{slug:"claim",priority:0},"Became protectorate of":{slug:"prot",priority:3},"Became associated state of":{slug:"assoc",priority:0},"Occupied by":{slug:"occ",priority:1},"Leased to":{slug:"leas",priority:0},"Became neutral or demilitarized zone of":{slug:"neut",priority:0},"Mandated to":{slug:"mand",priority:0},Sovereign:{slug:"SOV",priority:4},"Unincorporated territory":{slug:"uninc",priority:0},"Autonomous constituent country of":{slug:"autonom",priority:0},"Sovereign (unrecognised)":{slug:"SOV_U",priority:0},"Sovereign (limited)":{slug:"SOV_L",priority:1},"Protected area of":{slug:"protected",priority:0},Unknown:{slug:"N/A",priority:0},"":{slug:"alliance",priority:0}},j=function(e,t){return"translate(".concat(e,", ").concat(t,")")};!function(e){e.part="part",e.col="col",e.poss="poss",e.claim="claim",e.prot="prot",e.assoc="assoc",e.occ="occ",e.leas="leas",e.neut="neut",e.mand="mand",e.SOV="SOV",e.uninc="uninc",e.autonom="autonom",e.SOV_U="SOV_U",e.SOV_L="SOV_L",e.protected="protected",e.NA="N/A",e.alliance="alliance"}(a||(a={}));var v=n(43),k=n(46),_=n(27),E=n(31),C=n(61),w={links:[],entities:[]},W=Object(c.createContext)({state:w,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),S=Object(v.a)(function(e){return e.COW_code}),N=[a.SOV,a.SOV_U,a.SOV_L],x=function(e,t){var n=new C.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var c=e[a],r=t[a];if(void 0===r)continue;for(var i=0;i<c.length;i++){var o=c[i];n.set(r,o)}}return n},M=function(e,t){switch(t.type){case"LOADED":var n=t.payload.map(function(e){return{id:y()(),COW_code:e.COW_code,COW_name:e.COW_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:h[e.link_type],sovereign:{COW_code:e.sovereign_COW_code,COW_name:e.sovereign_COW_name}}}),a=S(n),c=Object(E.a)(function(e,t){var c=Object(_.a)(Object(k.a)(function(e){return!N.includes(e.status.slug)&&Object(d.a)(e.COW_code,t)}),Object(v.a)(function(e){return e.sovereign.COW_code})),r=Object(_.a)(Object(k.a)(function(e){return Object(d.a)(e.sovereign.COW_code,t)}),S),i=c(e);return{id:t,name:a[t][0].COW_name,start:Object(p.d)(e,function(e){return e.start_year}),end:Object(p.c)(e,function(e){return e.end_year}),occupations:i,campains:r(n)}},a),r=Object(s.a)(function(e){return Object(O.a)({},e,{occupations:x(e.occupations,c),campains:x(e.campains,c)})},c);return n.forEach(function(e){e.sovereign=r[e.sovereign.COW_code]}),{links:n,entities:Object(p.j)(r)}}return e},L=function(e){return Object(b.action)("LOADED",e)},V=Object(p.b)("data/RICentities_links.csv"),A=function(e){var t=Object(c.useReducer)(M,w),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)(function(){V.then(Object(_.a)(L,i))},[]),r.a.createElement(W.Provider,{value:{state:a,dispatch:i}},e.children)},B=n(47),H=n(44),U=n(62),D=n(32),P=n(63),z=n(36),I=n.n(z),J=(n(106),Object(p.f)(["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]).domain(Object(H.a)(a))),R=50,G=0,T=0,Y=50,$=0,q=Object(p.i)("%Y"),F=function(e,t){return e+ +t.end_year-+t.start_year},K=Object(U.a)(function(e,t){var n=Object(f.a)(e,2)[1];return Object(f.a)(t,2)[1].reduce(F,0)-n.reduce(F,0)}),Q=Object(_.a)(Object(D.a)(function(e,t){var n=Object(f.a)(t,2)[1];return[].concat(Object(B.a)(e),Object(B.a)(n))},[]),Object(P.a)(function(e){return e.status.slug})),X=function(e){var t=Object(c.useMemo)(y.a,[]),n=Object(c.useMemo)(function(){return K(Array.from(e.data.associations()))},[e.data]),a=Object(p.d)(n,function(e){return Object(f.a)(e,1)[0].start}),i=Object(p.c)(n,function(e){return Object(f.a)(e,1)[0].end}),o=e.width-$-T,s=e.data.dimension*e.lineHeight+G+Y,l=s-G-Y,u=e.hideGroupLabels?0:200,m=l/n.length,d=function(t){return Math.max(e.intervalMinWidth,O(t.end_year)-O(t.start_year))},O=Object(p.g)().domain([a,i]).range([u,o]),b=Object(p.e)().domain([0,e.data.dimension]).range([0,l]),g=Object(p.a)(O),h=.8*m,v=(m-h)/2,k=Object(c.useState)(),_=Object(f.a)(k,2),C=_[0],w=_[1],W=Object(c.useState)(),S=Object(f.a)(W,2),N=S[0],x=S[1],M=Object(c.useMemo)(function(){return Q(n)},[n]);return Object(c.useEffect)(function(){return function(){w(null),x(null)}},[e.data]),r.a.createElement("div",{className:"timelines-container",style:{width:o}},C&&r.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(O(C.link.start_year),"px, ").concat(b(C.index)+R+G+e.lineHeight,"px)"),minWidth:d(C.link)}},r.a.createElement("span",{className:"tooltip"},C.link.COW_name," was a ",C.link.status.slug," from ",q(C.link.start_year)," to ",q(C.link.end_year))),r.a.createElement("div",{className:"legend-container"},Object(H.a)(Object(E.a)(function(e,t){return r.a.createElement("button",{onClick:function(){return x(N===t?null:t)},className:I()({"legend-item":!0,"legend-item--hidden":N&&N!==t}),key:t,style:{backgroundColor:J(t)}},t," : ",e)},M))),r.a.createElement("svg",{height:s,width:e.width},r.a.createElement("g",{transform:j($,G)},r.a.createElement("defs",null,r.a.createElement("pattern",{id:"diagonalHatch-".concat(t),patternUnits:"userSpaceOnUse",width:"4",height:"4"},r.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),r.a.createElement("clipPath",{id:"name-area-".concat(t)},r.a.createElement("rect",{x:0,y:0,height:l,width:u}),console.log(l))),r.a.createElement("g",{transform:j(0,l),ref:function(e){e&&Object(p.h)(e).call(g)}}),r.a.createElement("g",{className:I()({group:!0,has_status:!!N},N)},n.map(function(n,a){var c=Object(f.a)(n,2),i=c[0],s=c[1];return r.a.createElement("g",{key:i.name,className:i.name,transform:j(0,b(a))},r.a.createElement("line",{className:"group-separator",x1:0,x2:o,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),r.a.createElement("text",{className:"entity-label",style:{clipPath:"url(#name-area-".concat(t,")")},fontSize:e.lineHeight,dy:"1em"},i.name),r.a.createElement("g",null,s.map(function(n){var c=d(n);return r.a.createElement("g",{key:n.id,transform:j(O(n.start_year),v)},r.a.createElement("rect",{rx:"5",className:I()("link-rect",n.status.slug),onClick:function(){return e.onLinkClick(n)},onMouseEnter:function(){return w({link:n,index:a})},fill:isNaN(c)?"url(#diagonalHatch-".concat(t,")"):J(n.status.slug),stroke:C&&C.link===n?"white":"black",strokeOpacity:C&&C.link===n?1:.2,strokeWidth:C&&C.link===n?2:1,width:isNaN(c)?"100%":c,height:h,y:0,x:0}))})))})))))},Z=function(e){var t=e.history,n=e.match.params.id,a=Object(c.useContext)(W).state.entities.find(function(e){return Object(d.a)(e.id,n)}),i=Object(c.useCallback)(function(e){t.push("/country/".concat(e.sovereign.id))},[t]),o=Object(c.useCallback)(function(e){t.push("/country/".concat(e.COW_code))},[t]);return void 0===a?r.a.createElement("div",null,"Loading"):r.a.createElement("div",null,r.a.createElement("aside",null,r.a.createElement(l.b,{to:"/"},"Home")),r.a.createElement("h1",null,a.name),r.a.createElement("h2",null,"Territory masters"),r.a.createElement(X,{onLinkClick:i,intervalMinWidth:5,data:a.occupations,lineHeight:20,width:1e3}),r.a.createElement("h2",null,"Occupying territories"),r.a.createElement(X,{onLinkClick:o,intervalMinWidth:5,data:a.campains,lineHeight:20,width:1e3}))},ee=Object(s.a)(function(e){return{value:e.id,label:e.name}}),te=function(e){console.log(e);var t=Object(c.useContext)(W).state,n=Object(c.useCallback)(function(t){e.history.push("/country/".concat(t.value))},[e.history]);return r.a.createElement(m.a,{onChange:n,options:ee(t.entities)})},ne=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,null,r.a.createElement(l.a,{basename:"/ric_entities_timelines"},r.a.createElement(u.a,{path:"/",exact:!0,component:te}),r.a.createElement(u.a,{path:"/country/:id",component:Z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,n){e.exports=n(113)},74:function(e,t,n){},75:function(e,t,n){}},[[69,1,2]]]);
//# sourceMappingURL=main.dc00cf22.chunk.js.map