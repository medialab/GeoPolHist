(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(21),o=n.n(i),s=(n(74),n(67)),l=n(33),u=n(20),d=n(66),m=(n(75),n(29)),f=n(13),O=n(68),p=n(7),b=n(59),g=n(60),h=n.n(g),y={"Became part of":{slug:"part",priority:2},"Became colony of":{slug:"col",priority:3},"Became possession of":{slug:"poss",priority:3},"Claimed by":{slug:"claim",priority:0},"Became protectorate of":{slug:"prot",priority:3},"Became associated state of":{slug:"assoc",priority:0},"Occupied by":{slug:"occ",priority:1},"Leased to":{slug:"leas",priority:0},"Became neutral or demilitarized zone of":{slug:"neut",priority:0},"Mandated to":{slug:"mand",priority:0},Sovereign:{slug:"SOV",priority:4},"Unincorporated territory":{slug:"uninc",priority:0},"Autonomous constituent country of":{slug:"autonom",priority:0},"Sovereign (unrecognised)":{slug:"SOV_U",priority:0},"Sovereign (limited)":{slug:"SOV_L",priority:1},"Protected area of":{slug:"protected",priority:0},Unknown:{slug:"N/A",priority:0},"":{slug:"alliance",priority:0}},j=function(e,t){return"translate(".concat(e,", ").concat(t,")")};!function(e){e.part="part",e.col="col",e.poss="poss",e.claim="claim",e.prot="prot",e.assoc="assoc",e.occ="occ",e.leas="leas",e.neut="neut",e.mand="mand",e.SOV="SOV",e.uninc="uninc",e.autonom="autonom",e.SOV_U="SOV_U",e.SOV_L="SOV_L",e.protected="protected",e.NA="N/A",e.alliance="alliance"}(a||(a={}));var v=n(42),E=n(45),k=n(27),_=n(30),C=n(61),w={links:[],entities:[]},W=Object(r.createContext)({state:w,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),S=Object(v.a)(function(e){return e.COW_code}),N=[a.SOV,a.SOV_U,a.SOV_L],x=function(e,t){var n=new C.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var r=e[a],c=t[a];if(void 0===c)continue;for(var i=0;i<r.length;i++){var o=r[i];n.set(c,o)}}return n},M=function(e,t){switch(t.type){case"LOADED":var n=t.payload.map(function(e){return{id:h()(),COW_code:e.COW_code,COW_name:e.COW_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:y[e.link_type],sovereign:{COW_code:e.sovereign_COW_code,COW_name:e.sovereign_COW_name}}}),a=S(n),r=Object(_.a)(function(e,t){var r=Object(k.a)(Object(E.a)(function(e){return!N.includes(e.status.slug)&&Object(m.a)(e.COW_code,t)}),Object(v.a)(function(e){return e.sovereign.COW_code})),c=Object(k.a)(Object(E.a)(function(e){return Object(m.a)(e.sovereign.COW_code,t)}),S),i=r(e);return{id:t,name:a[t][0].COW_name,start:Object(p.d)(e,function(e){return e.start_year}),end:Object(p.c)(e,function(e){return e.end_year}),occupations:i,campains:c(n)}},a),c=Object(s.a)(function(e){return Object(O.a)({},e,{occupations:x(e.occupations,r),campains:x(e.campains,r)})},r);return n.forEach(function(e){e.sovereign=c[e.sovereign.COW_code]}),{links:n,entities:Object(p.j)(c)}}return e},L=function(e){return Object(b.action)("LOADED",e)},V=Object(p.b)("data/RICentities_links.csv"),A=function(e){var t=Object(r.useReducer)(M,w),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)(function(){V.then(Object(k.a)(L,i))},[]),c.a.createElement(W.Provider,{value:{state:a,dispatch:i}},e.children)},B=n(46),H=n(43),U=n(62),D=n(31),P=n(63),z=n(35),I=n.n(z),J=(n(106),Object(p.f)(["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]).domain(Object(H.a)(a))),R=50,G=0,T=0,Y=50,$=0,q=Object(p.i)("%Y"),F=function(e,t){return e+ +t.end_year-+t.start_year},K=Object(U.a)(function(e,t){var n=Object(f.a)(e,2)[1];return Object(f.a)(t,2)[1].reduce(F,0)-n.reduce(F,0)}),Q=Object(k.a)(Object(D.a)(function(e,t){var n=Object(f.a)(t,2)[1];return[].concat(Object(B.a)(e),Object(B.a)(n))},[]),Object(P.a)(function(e){return e.status.slug})),X=function(e){var t=Object(r.useMemo)(function(){return K(Array.from(e.data.associations()))},[e.data]),n=Object(p.d)(t,function(e){return Object(f.a)(e,1)[0].start}),a=Object(p.c)(t,function(e){return Object(f.a)(e,1)[0].end}),i=e.width-$-T,o=e.data.dimension*e.lineHeight+G+Y,s=o-G-Y,l=e.hideGroupLabels?0:200,u=s/t.length,d=function(t){return Math.max(e.intervalMinWidth,m(t.end_year)-m(t.start_year))},m=Object(p.g)().domain([n,a]).range([l,i]),O=Object(p.e)().domain([0,e.data.dimension]).range([0,s]),b=Object(p.a)(m),g=.8*u,h=(u-g)/2,y=Object(r.useState)(),v=Object(f.a)(y,2),E=v[0],k=v[1],C=Object(r.useState)(),w=Object(f.a)(C,2),W=w[0],S=w[1],N=Object(r.useMemo)(function(){return Q(t)},[t]);return Object(r.useEffect)(function(){return function(){k(null),S(null)}},[e.data]),c.a.createElement("div",{className:"timelines-container",style:{width:i}},E&&c.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(m(E.link.start_year),"px, ").concat(O(E.index)+R+G+e.lineHeight,"px)"),minWidth:d(E.link)}},c.a.createElement("span",{className:"tooltip"},E.link.COW_name," was a ",E.link.status.slug," from ",q(E.link.start_year)," to ",q(E.link.end_year))),c.a.createElement("div",{className:"legend-container"},Object(H.a)(Object(_.a)(function(e,t){return c.a.createElement("button",{onClick:function(){return S(W===t?null:t)},className:I()({"legend-item":!0,"legend-item--hidden":W&&W!==t}),key:t,style:{backgroundColor:J(t)}},t," : ",e)},N))),c.a.createElement("svg",{height:o,width:e.width},c.a.createElement("g",{transform:j($,G)},c.a.createElement("defs",null,c.a.createElement("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4"},c.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),c.a.createElement("clipPath",{id:"chart-content"},c.a.createElement("rect",{x:l,y:0,height:s,width:i-l})),c.a.createElement("clipPath",{id:"name-area"},c.a.createElement("rect",{x:0,y:0,height:s,width:l}))),c.a.createElement("g",{transform:j(0,s),ref:function(e){e&&Object(p.h)(e).call(b)}}),c.a.createElement("g",{className:I()({group:!0,has_status:!!W},W)},t.map(function(t,n){var a=Object(f.a)(t,2),r=a[0],o=a[1];return c.a.createElement("g",{key:r.name,className:r.name,transform:j(0,O(n))},c.a.createElement("line",{className:"group-separator",x1:0,x2:i,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),c.a.createElement("text",{className:"entity-label",fontSize:e.lineHeight,dy:"1em"},r.name),c.a.createElement("g",null,o.map(function(t){var a=d(t);return c.a.createElement("g",{key:t.id,transform:j(m(t.start_year),h)},c.a.createElement("rect",{rx:"5",className:I()("link-rect",t.status.slug),onClick:function(){return e.onLinkClick(t)},onMouseEnter:function(){return k({link:t,index:n})},fill:isNaN(a)?"url(#diagonalHatch)":J(t.status.slug),stroke:E&&E.link===t?"white":"black",strokeOpacity:E&&E.link===t?1:.2,strokeWidth:E&&E.link===t?2:1,width:isNaN(a)?"100%":a,height:g,y:0,x:0}))})))})))))},Z=function(e){var t=e.history,n=e.match.params.id,a=Object(r.useContext)(W).state.entities.find(function(e){return Object(m.a)(e.id,n)}),i=Object(r.useCallback)(function(e){t.push("/country/".concat(e.sovereign.id))},[t]),o=Object(r.useCallback)(function(e){t.push("/country/".concat(e.COW_code))},[t]);return void 0===a?c.a.createElement("div",null,"Loading"):c.a.createElement("div",null,c.a.createElement("aside",null,c.a.createElement(l.b,{to:"/"},"Home")),c.a.createElement("h1",null,a.name),c.a.createElement("h2",null,"Territory masters"),c.a.createElement(X,{onLinkClick:i,intervalMinWidth:5,data:a.occupations,lineHeight:20,width:1e3}),c.a.createElement("h2",null,"Occupying territories"),c.a.createElement(X,{onLinkClick:o,intervalMinWidth:5,data:a.campains,lineHeight:20,width:1e3}))},ee=Object(s.a)(function(e){return{value:e.id,label:e.name}}),te=function(e){console.log(e);var t=Object(r.useContext)(W).state,n=Object(r.useCallback)(function(t){e.history.push("/country/".concat(t.value))},[e.history]);return c.a.createElement(d.a,{onChange:n,options:ee(t.entities)})},ne=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(A,null,c.a.createElement(l.a,{basename:"/ric_entities_timelines"},c.a.createElement(u.a,{path:"/",component:te}),c.a.createElement(u.a,{path:"/country/:id",component:Z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,n){e.exports=n(113)},74:function(e,t,n){},75:function(e,t,n){}},[[69,1,2]]]);
//# sourceMappingURL=main.b4ab38a1.chunk.js.map