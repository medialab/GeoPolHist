(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(24),i=n.n(r),o=(n(77),n(22)),l=n(67),s=n(25),u=n(23),m=n(66),d=n(14),f=n(69),b=n(68),h=(n(78),n(9)),p=n(34),O=n(70),E=n(6),j=n(61),g=n(35),y=n.n(g),v=n(40),k=n(71),_=n(48),w=n(31),P=n(36),H=n(62),G={links:[],entities:[],status:{}},N=Object(a.createContext)({state:G,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),x=Object(v.a)(function(e){return e.GPH_code}),M=function(e,t){var n=new H.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var c=e[a],r=t[a];if(void 0===r)continue;for(var i=0;i<c.length;i++){var o=c[i];n.set(r,o)}}return n},C=function(e,t){switch(t.type){case"LOADED":var n=t.payload[0],a=t.payload[1],c=n.map(function(e){var t={id:y()(),GPH_code:e.GPH_code,GPH_name:e.GPH_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:a[e.GPH_status],sovereign:{GPH_code:e.sovereign_GPH_code,GPH_name:e.sovereign_GPH_name}};return t.status||console.error("unknown link type",e),t}),r=x(c),i=Object(P.a)(function(e,t){var n=Object(w.a)(Object(_.a)(function(e){return Object(p.a)(e.GPH_code,t)}),Object(v.a)(function(e){return e.sovereign.GPH_code||t})),a=Object(w.a)(Object(_.a)(function(e){return Object(p.a)(e.sovereign.GPH_code,t)}),x),i=n(e),o=a(c),l=Object(v.a)(function(e){return e.status.slug},Object(k.a)(Object(E.k)(o)));return{id:t,name:r[t][0].GPH_name,start:Object(E.e)(e,function(e){return e.start_year}),end:Object(E.d)(e,function(e){return e.end_year}),occupations:i,campains:o,campainsMap:l}},r),o=Object(l.a)(function(e){return Object(O.a)({},e,{occupations:M(e.occupations,i),campains:M(e.campains,i)})},i);return c.forEach(function(e){e.sovereign=o[e.sovereign.GPH_code]}),{links:c,entities:Object(E.k)(o),status:a}}return e},L=function(e){return Object(j.action)("LOADED",e)},S=Object(E.c)("./data/GeoPolHist_entities_status_in_time.csv"),D=fetch("./data/GPH_status.json").then(function(e){return e.json()}),W=Promise.all([S,D]),z=function(e){var t=Object(a.useReducer)(C,G),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)(function(){W.then(Object(w.a)(L,i))},[]),c.a.createElement(N.Provider,{value:{state:r,dispatch:i}},e.children)},B=n(63),A=n(32),I=n(39),J=n.n(I),R=function(e,t){return"translate(".concat(e,", ").concat(t,")")},U=(n(109),50),F=0,T=0,V=50,Y=0,$=Object(E.j)("%Y"),q=Object(w.a)(Object(A.a)(function(e,t){var n=Object(h.a)(t,2)[1];return[].concat(Object(o.a)(e),Object(o.a)(n))},[]),Object(A.a)(function(e,t){return e[t.status.slug]=t.status,e},{})),K=function(e){var t=Object(a.useContext)(N).state,n=Object(E.g)(["#cd7f3d","#af49d8","#65da57","#d84397","#cbe240","#6c6cd4","#a3ca63","#ad63ab","#489046","#d74433","#6cdaaf","#c15b67","#86c5d8","#d8b94f","#6779a8","#787938","#d4a8cc","#4f8178","#cdcea7","#997462"]).domain(Object.keys(t.status).map(function(e){return t.status[e].slug})),r=e.xScale,i=e.data,o=e.nbLines,l=Object(a.useMemo)(y.a,[]),s=e.width-Y-T,u=o*e.lineHeight+F+V,m=u-F-V,f=e.hideGroupLabels?0:200,b=m/i.length,p=function(t){return Math.max(e.intervalMinWidth,r(t.end_year)-r(t.start_year))};r.range([f,s-15]);var O=Object(E.f)().domain([0,o]).range([0,m]),j=Object(E.b)(r),g=Object(E.a)(r),v=.8*b,k=(b-v)/2,_=Object(a.useState)(),w=Object(h.a)(_,2),H=w[0],G=w[1],x=Object(a.useState)(),M=Object(h.a)(x,2),C=M[0],L=M[1],S=Object(a.useMemo)(function(){return q(i)},[i]),D=Object(d.a)(function(e,t){return e>t}),W=Object(d.a)(function(e,t){return D(e[1].map(function(e){return e.start_year}))[0]>D(t[1].map(function(e){return e.start_year}))[0]});return Object(a.useEffect)(function(){return function(){G(null),L(null)}},[e.data]),c.a.createElement("div",{className:"timelines-container",style:{width:s},onMouseLeave:function(){return G(null)}},H&&c.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(r(H.link.start_year),"px, ").concat(O(H.index)+U+F+e.lineHeight+20,"px)"),minWidth:p(H.link)}},c.a.createElement("span",{className:"tooltip"},H.link.GPH_name," was a ",H.link.status.slug," from ",$(H.link.start_year)," to ",$(H.link.end_year))),c.a.createElement("div",{className:"legend"},c.a.createElement("div",{className:"legend-container"},Object(B.a)(Object(P.a)(function(e,t){return c.a.createElement("span",{onClick:function(){L(C===t?null:t)},className:J()({"legend-item":!0,"legend-item--hidden":C&&C!==t})},c.a.createElement("div",{className:"colorLegendItem",key:t,style:{backgroundColor:n(t)}}),c.a.createElement("span",null,e.GPH_status))},S))),c.a.createElement("svg",{height:20,width:e.width},c.a.createElement("g",{transform:R(Y,F)},c.a.createElement("g",{transform:R(0,17),ref:function(e){e&&Object(E.i)(e).call(j)}})))),c.a.createElement("svg",{height:u,width:e.width},c.a.createElement("g",{transform:R(Y,F)},c.a.createElement("defs",null,c.a.createElement("pattern",{id:"diagonalHatch-".concat(l),patternUnits:"userSpaceOnUse",width:"4",height:"4"},c.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),c.a.createElement("clipPath",{id:"name-area-".concat(l)},c.a.createElement("rect",{x:0,y:0,height:m,width:f}))),c.a.createElement("g",{transform:R(0,m),ref:function(e){e&&Object(E.i)(e).call(g)}}),c.a.createElement("g",{className:J()({group:!0,has_status:!!C},C)},W(i).map(function(t,a){var i=Object(h.a)(t,2),o=i[0],u=i[1];return c.a.createElement("g",{key:o.name,className:o.name,transform:R(0,O(a))},c.a.createElement("line",{className:"group-separator",x1:0,x2:s,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),c.a.createElement("text",{className:"entity-label",style:{clipPath:"url(#name-area-".concat(l,")")},fontSize:"1em",dy:"1em",width:f},o.name.length<=22?o.name:o.name.slice(0,22)+"\u2026",c.a.createElement("title",null,o.name)),c.a.createElement("g",null,u.map(function(t){var i=p(t);return c.a.createElement("g",{key:t.id,transform:R(r(t.start_year),k)},c.a.createElement("rect",{rx:"5",className:J()("link-rect",t.status.slug),onClick:function(){return e.onLinkClick(t)},onMouseEnter:function(){return G({link:t,index:a})},fill:isNaN(i)?"url(#diagonalHatch-".concat(l,")"):n(t.status.slug),stroke:H&&H.link===t?"white":"black",strokeOpacity:H&&H.link===t?1:.2,strokeWidth:H&&H.link===t?2:1,width:isNaN(i)?"100%":i,height:v,y:0,x:0}))})))})))))},Q=function(e,t){return e+ +t.end_year-+t.start_year},X=Object(d.a)(function(e,t){var n=Object(h.a)(e,2)[1];return Object(h.a)(t,2)[1].reduce(Q,0)-n.reduce(Q,0)}),Z=function(e){var t=e.history,n=e.country,r=Object(a.useCallback)(function(e){t.push("/country/".concat(e.sovereign.id))},[t]),i=Object(a.useCallback)(function(e){t.push("/country/".concat(e.GPH_code))},[t]),l=Array.from(n.occupations.associations()),u=Array.from(n.campains.associations()),m=Object(a.useMemo)(function(){return X([].concat(Object(o.a)(l),Object(o.a)(u)))},[l,u]),d=Object(E.e)(m,function(e){return Object(h.a)(e,1)[0].start}),f=Object(E.d)(m,function(e){return Object(h.a)(e,1)[0].end}),b=Object(E.h)().domain([d,f]);return c.a.createElement("div",null,c.a.createElement("aside",null,c.a.createElement(s.b,{to:"/"},"Home")),c.a.createElement("h1",null,n.name," (",n.id,")"),c.a.createElement("h2",null,"Status"),c.a.createElement(K,{onLinkClick:r,intervalMinWidth:5,data:l,nbLines:n.occupations.dimension,lineHeight:20,width:1e3,xScale:b}),c.a.createElement("h2",null,"Sovereign of"),c.a.createElement(K,{onLinkClick:i,intervalMinWidth:5,data:u,nbLines:n.campains.dimension,lineHeight:20,width:1e3,xScale:b}))},ee=function(e){var t=e.match.params.id,n=Object(a.useContext)(N).state.entities.find(function(e){return Object(p.a)(e.id,t)});return void 0===n?c.a.createElement("div",null,"Loading"):c.a.createElement(Z,Object.assign({},e,{country:n}))},te=Object(l.a)(function(e){return{value:e.id,label:e.name}}),ne=Object(d.a)(function(e,t){return t.campains.size-e.campains.size}),ae=Object(d.a)(function(e,t){return t.occupations.size-e.occupations.size}),ce=Object(b.a)(0,["campainsMap","col","length"]),re=Object(d.a)(function(e,t){return ce(t)-ce(e)}),ie=Object(f.a)(5),oe=function(e){ie(ne(e.entities));var t=ie(ae(e.entities)),n=ie(re(e.entities)),r=ie(function(e){var t=Object(d.a)(function(e,t){return t.end_year>e.end_year});return Object(d.a)(function(e,t){return t.end>e.end})(e.filter(function(e){return"dis"===t(Object(o.a)(e.occupations.values()))[0].status.slug}))}(e.entities)),i=(Object(a.useContext)(N).state,new Intl.DateTimeFormat("en-GB",{year:"numeric"}));return c.a.createElement("div",null,c.a.createElement("div",{className:"line"},c.a.createElement("div",{className:"grow"},c.a.createElement("h3",null,"Biggest number of sovereigns"),c.a.createElement("ol",null,t.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name," - ",e.occupations.size," sovereigns"))}))),c.a.createElement("div",{className:"grow"},c.a.createElement("h3",null,"Biggest number of colonies"),c.a.createElement("ol",null,n.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name," - ",ce(e)," colonies"))}))),c.a.createElement("div",{className:"grow"},c.a.createElement("h3",null,"Most recently disolved"),c.a.createElement("ol",null,r.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name," - ",i.format(e.end)))})))))},le=function(e){var t=Object(a.useContext)(N).state,n=Object(a.useCallback)(function(t){e.history.push("/country/".concat(t.value))},[e.history]);return c.a.createElement("div",{className:"container container--home"},c.a.createElement("h1",null,"GeoPolHist",c.a.createElement("br",null),"Geo-Political entities History from 1816 to 2020"),c.a.createElement("p",null,"Paragraph about the data set."),c.a.createElement("h2",null,"Visualise a Geo-Political entities political history"),c.a.createElement(m.a,{placeholder:t.entities.length?"Search for a Geo-Political entity":"Still loading",onChange:n,options:te(t.entities)}),t.entities.length?c.a.createElement(oe,{entities:t.entities}):c.a.createElement("p",null,"Data is still loading..."),c.a.createElement("h2",null,"References"),c.a.createElement("p",null,"See our data paper for more information about how and why we built this data set:"),c.a.createElement("p",null,'Dedinger B\xe9atrice, Girard Paul, "GeoPolHist, a new data set of the geo-political entities of the world (1816-2020)" 2020 (in review)'),c.a.createElement("p",null,"Download the data set from ",c.a.createElement("a",{href:"https://github.com/medialab/GeoPolHist"},"GeoPolHist datapackage repository")),c.a.createElement("iframe",{src:"./sankey.html"}),c.a.createElement("p",null,c.a.createElement("a",{href:"./sankey.html"},"open the diagram in full page")))},se=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(z,null,c.a.createElement(s.a,{basename:"/GeoPolHist"},c.a.createElement(u.a,{path:"/",exact:!0,component:le}),c.a.createElement(u.a,{path:"/country/:id",component:ee}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e,t,n){e.exports=n(116)},77:function(e,t,n){},78:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.b4a9a02f.chunk.js.map