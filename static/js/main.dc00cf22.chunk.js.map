{"version":3,"sources":["utils.ts","AppContext.tsx","timeline.tsx","Country.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["STATUS_SLUG","translate_link_type","Became part of","slug","priority","Became colony of","Became possession of","Claimed by","Became protectorate of","Became associated state of","Occupied by","Leased to","Became neutral or demilitarized zone of","Mandated to","Sovereign","Unincorporated territory","Autonomous constituent country of","Sovereign (unrecognised)","Sovereign (limited)","Protected area of","Unknown","","translate","x","y","concat","initialState","links","entities","AppContext","createContext","state","dispatch","arg","console","log","groupByCOWCode","groupBy","link","COW_code","SOV","SOV_U","SOV_L","toMap","object","map","MultiMap","key","hasOwnProperty","entity","undefined","index","length","set","reducer","action","type","payload","csvLink","id","uuid","COW_name","end_year","Date","start_year","status","link_type","sovereign","sovereign_COW_code","sovereign_COW_name","entitiesMap","wEntities","mapObjIndexed","ownLinks","selectOccupations","pipe","filter","includes","equals","selectCampains","occ","name","start","min","d","end","max","occupations","campains","wMapEntities","Object","objectSpread","forEach","values","loadedActionCreator","data","dataPromise","csv","AppContextProvider","props","_useReducer","useReducer","_useReducer2","slicedToArray","useEffect","then","react_default","a","createElement","Provider","value","children","colorScale","scaleOrdinal","domain","legend","margins","formater","timeFormat","dateReducer","accumulator","sortByDuration","sort","_ref","_ref2","aLinks","reduce","countByStatus","acc","_ref5","toConsumableArray","countBy","Timelines","useMemo","Array","from","associations","minDate","_ref7","maxDate","_ref9","width","elHeight","dimension","lineHeight","height","groupWidth","hideGroupLabels","groupHeight","intervalRectWidth","Math","intervalMinWidth","xScale","scaleTime","range","yScale","scaleLinear","xAxis","axisBottom","intervalBarHeight","intervalBarMargin","_useState","useState","_useState2","hover","setHover","_useState3","_useState4","setStatus","countedByStatus","className","style","transform","minWidth","number","label","onClick","cx","legend-item","legend-item--hidden","backgroundColor","patternUnits","stroke","strokeWidth","ref","element","select","call","group","has_status","_ref11","_ref12","x1","x2","y1","y2","strokeOpacity","clipPath","fontSize","dy","w","rx","onLinkClick","onMouseEnter","fill","isNaN","Country","history","match","params","country","useContext","find","onOccupiedLinkClick","useCallback","push","onCampainsLinkClick","react_router_dom","to","src_timeline","countriesToOptions","Home","onChange","event","react_select_browser_esm","options","App","src_AppContext","basename","react_router","path","exact","component","Boolean","window","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dc00cf22.chunk.js","sourcesContent":["\nexport const xCowName = (link: Link) => link.COW_name;\n// export const xSovereignCowName = (link: Link) => link.sovereign_COW_name;\n// export const xType = (link: Link) => link.link_type === 'Sovereign';\nexport const translate_link_type: any = {\n  \"Became part of\" : {\"slug\":\"part\",\"priority\":2},\n  \"Became colony of\": {\"slug\":\"col\",\"priority\":3},\n  \"Became possession of\": {\"slug\":\"poss\",\"priority\":3},\n  \"Claimed by\": {\"slug\":\"claim\",\"priority\":0},\n  \"Became protectorate of\": {\"slug\":\"prot\",\"priority\":3},\n  \"Became associated state of\": {\"slug\":\"assoc\",\"priority\":0},\n  \"Occupied by\": {\"slug\":\"occ\",\"priority\":1},\n  \"Leased to\": {\"slug\":\"leas\",\"priority\":0},\n  \"Became neutral or demilitarized zone of\": {\"slug\":\"neut\",\"priority\":0},\n  \"Mandated to\": {\"slug\":\"mand\",\"priority\":0},\n  \"Sovereign\": {\"slug\":\"SOV\",\"priority\":4},\n  \"Unincorporated territory\": {\"slug\":\"uninc\",\"priority\":0},\n  \"Autonomous constituent country of\": {\"slug\":\"autonom\",\"priority\":0},\n  \"Sovereign (unrecognised)\": {\"slug\":\"SOV_U\",\"priority\":0},\n  \"Sovereign (limited)\": {\"slug\":\"SOV_L\",\"priority\":1},\n  \"Protected area of\": {\"slug\":\"protected\",\"priority\":0},\n  \"Unknown\": {\"slug\":\"N/A\",\"priority\":0},\n  \"\": {\"slug\": \"alliance\", \"priority\": 0}\n}\n\nexport const translate = (x: number, y: number) => `translate(${x}, ${y})`\n\nexport enum STATUS_SLUG {\n  part = \"part\",\n  col = \"col\",\n  poss = \"poss\",\n  claim = \"claim\",\n  prot = \"prot\",\n  assoc = \"assoc\",\n  occ = \"occ\",\n  leas = \"leas\",\n  neut = \"neut\",\n  mand = \"mand\",\n  SOV = \"SOV\",\n  uninc = \"uninc\",\n  autonom = \"autonom\",\n  SOV_U = \"SOV_U\",\n  SOV_L = \"SOV_L\",\n  protected = \"protected\",\n  NA = \"N/A\",\n  alliance = \"alliance\",\n}\n","import React, { useEffect } from 'react';\nimport { csv, DSVRowArray, max, min, values } from 'd3';\nimport { useReducer, createContext } from \"react\";\nimport { action, ActionType } from 'typesafe-actions';\nimport uuid from 'uuid';\nimport { translate_link_type, STATUS_SLUG } from './utils';\nimport groupBy from 'ramda/es/groupBy';\nimport map from 'ramda/es/map';\nimport equals from 'ramda/es/equals';\nimport filter from 'ramda/es/filter';\nimport pipe from 'ramda/es/pipe';\nimport mapObjIndexed from 'ramda/es/mapObjIndexed';\nimport { MultiMap } from 'mnemonist';\n\nconst initialState: GlobalState = {\n  links: [],\n  entities: [],\n}\n\ninterface AppContext {\n  state: any;\n  dispatch: (action: any) => any;\n}\n\nexport const AppContext = createContext<AppContext>({\n  state: initialState,\n  dispatch: (arg) => {\n    console.log('not la bonne fonction poto', arg);\n  }\n});\n\nconst groupByCOWCode = groupBy((link: Link) => link.COW_code);\n\nconst SOV = [STATUS_SLUG.SOV, STATUS_SLUG.SOV_U, STATUS_SLUG.SOV_L]\n\nconst toMap = (object: {[key: string]: Link[]}, entities: {[key: string]: Entity}) => {\n  const map = new MultiMap<Entity, Link>();\n  for (const key in object) {\n    if (object.hasOwnProperty(key)) {\n      const links = object[key];\n      const entity = entities[key]\n      if (entity === undefined) {\n        continue\n      }\n      for (let index = 0; index < links.length; index++) {\n        const link = links[index];\n        map.set(entity, link);\n      }\n    }\n  }\n  return map;\n}\n\nconst reducer = (state: GlobalState, action: ActionType<any>) => {\n  switch (action.type) {\n    case 'LOADED': {\n      const links: WLink[] = action.payload.map((csvLink: CSVLink) => {\n        return {\n          id: uuid() as string,\n          COW_code: csvLink.COW_code,\n          COW_name: csvLink.COW_name,\n          end_year: new Date(csvLink.end_year),\n          start_year: new Date(csvLink.start_year),\n          status: translate_link_type[csvLink.link_type],\n          sovereign: {\n            COW_code: csvLink.sovereign_COW_code,\n            COW_name: csvLink.sovereign_COW_name,\n          }\n        } as WLink;\n      });\n      const entitiesMap = groupByCOWCode(links);\n      const wEntities: {[key: string]: Entity} = mapObjIndexed((ownLinks: Link[], COW_code: COW_code) => {\n        const selectOccupations = pipe(\n          filter((link: WLink) => !SOV.includes(link.status.slug) && equals(link.COW_code, COW_code)),\n          // groupByCOWCode,\n          groupBy((link: WLink) => link.sovereign.COW_code),\n        );\n        const selectCampains = pipe(\n          filter((link: WLink) => equals(link.sovereign.COW_code, COW_code)),\n          groupByCOWCode,\n        );\n        const occ = selectOccupations(ownLinks);\n        // console.log(occ);\n        return {\n          id: COW_code,\n          name: entitiesMap[COW_code][0].COW_name,\n          start: min(ownLinks, d => d.start_year),\n          end: max(ownLinks, d => d.end_year),\n          occupations: occ,\n          campains: selectCampains(links)\n        };\n      }, entitiesMap);\n      const wMapEntities = map((entity: WEntity) => ({\n        ...entity,\n        occupations: toMap(entity.occupations, wEntities),\n        campains: toMap(entity.campains, wEntities)\n      }), wEntities);\n      links.forEach((link: WLink) => {\n        link.sovereign = wMapEntities[link.sovereign.COW_code];\n      });\n      return {\n        links: links as unknown as Link[],\n        entities: values(wMapEntities)\n      }\n    }\n  }\n  return state;\n}\n\nconst loadedActionCreator = (data: DSVRowArray<string>) => action('LOADED', data);\n\nconst dataPromise = csv('data/RICentities_links.csv');\nconst AppContextProvider: React.FC = (props: any) => {\n  const [state, dispatch] = useReducer(reducer, initialState as never);\n  useEffect(() => {\n    dataPromise.then(pipe(loadedActionCreator, dispatch));\n  }, []);\n  return (\n    <AppContext.Provider value={{state, dispatch: dispatch}}>\n      {props.children}\n    </AppContext.Provider>\n  )\n}\n\nexport default AppContextProvider;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { scaleTime, scaleOrdinal, min, max, axisBottom, select, scaleLinear, timeFormat } from 'd3';\nimport values from 'ramda/es/values';\nimport sort from 'ramda/es/sort';\nimport reduce from 'ramda/es/reduce';\nimport countBy from 'ramda/es/countBy';\nimport mapObjIndexed from 'ramda/es/mapObjIndexed';\nimport pipe from 'ramda/es/pipe';\nimport MultiMap from 'mnemonist/multi-map';\nimport cx from 'classnames';\nimport { translate, STATUS_SLUG } from './utils';\nimport './timeline.css'\nimport uuid from 'uuid';\n\nconst colorScale = scaleOrdinal(['#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8', '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', '#ffffff', '#000000']).domain(values(STATUS_SLUG));\nconst legend = {\n  height: 50,\n}\nconst margins = {\n  top: 0,\n  right: 0,\n  bottom: 50,\n  left: 0\n};\nconst formater = timeFormat('%Y');\n\nconst dateReducer = (accumulator, link: Link) => accumulator + (+link.end_year) - +link.start_year\n\nconst sortByDuration = sort(([, aLinks], [, bLinks]) => bLinks.reduce(dateReducer, 0) - aLinks.reduce(dateReducer, 0));\nconst countByStatus = pipe(\n  reduce((acc, [, links]: [Entity, Link[]]) => [...acc, ...links], []),\n  countBy((link: Link) => link.status.slug),\n);\n\nconst Timelines: React.FC<{\n  data: MultiMap<Entity, Link>;\n  hideGroupLabels?: boolean;\n  intervalMinWidth: number;\n  lineHeight: number;\n  width: number;\n  onLinkClick: (link: Link) => void;\n}> = props => {\n  // useWhyDidYouUpdate('timeline', props);\n  const id = useMemo(uuid, []);\n  const data: [Entity, Link[]][] = useMemo(() => sortByDuration(Array.from(props.data.associations() as any)), [props.data]);\n  const minDate = min(data, ([{start}]) => start);\n  const maxDate = max(data, ([{end}]) => end);\n  const width = props.width - margins.left - margins.right;\n  const elHeight = props.data.dimension * props.lineHeight + margins.top + margins.bottom;\n  const height = elHeight - margins.top - margins.bottom;\n  const groupWidth = props.hideGroupLabels ? 0 : 200;\n  const groupHeight = height / data.length;\n  const intervalRectWidth = (d: Link) => Math.max(props.intervalMinWidth, xScale(d.end_year) - xScale(d.start_year))\n  const xScale = scaleTime()\n    .domain([minDate, maxDate])\n    .range([groupWidth, width]);\n  const yScale = scaleLinear()\n    .domain([0, props.data.dimension])\n    .range([0, height]);\n  const xAxis = axisBottom(xScale);\n  const intervalBarHeight = 0.8 * groupHeight;\n  const intervalBarMargin = (groupHeight - intervalBarHeight) / 2;\n  const [hover, setHover] = useState<{link: Link, index: number}>();\n  const [status, setStatus] = useState<STATUS_SLUG>();\n  const countedByStatus = useMemo(() => countByStatus(data), [data]);\n  useEffect(() => () => {setHover(null); setStatus(null)}, [props.data]);\n  return (\n    <div className='timelines-container' style={{width: width}} /* onMouseLeave={() => setHover(null)} */ >\n      {hover && <div className='tooltip-container' style={{\n        transform: `translate(${xScale(hover.link.start_year)}px, ${yScale(hover.index) + legend.height + margins.top + props.lineHeight}px)`,\n        minWidth: intervalRectWidth(hover.link)\n      }}>\n        <span className='tooltip'>{hover.link.COW_name} was a {hover.link.status.slug} from {formater(hover.link.start_year)} to {formater(hover.link.end_year)}</span>\n      </div>}\n      <div className='legend-container'>\n        {values(mapObjIndexed((number, label) => \n          <button onClick={() => status === label ? setStatus(null) : setStatus(label)} className={cx({\n            'legend-item': true,\n            'legend-item--hidden': status && status !== label,\n          })} key={label} style={{backgroundColor: colorScale(label)}}>{label} : {number}</button>\n        , countedByStatus))}\n      </div>\n      <svg height={elHeight} width={props.width}>\n        <g transform={translate(margins.left, margins.top)}>\n          <defs>\n            <pattern id={`diagonalHatch-${id}`} patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\">\n              <path d=\"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\" style={{stroke: 'black', strokeWidth: 1}} />\n            </pattern>\n            <clipPath id={`name-area-${id}`}>\n              <rect x={0} y={0} height={height} width={groupWidth} />\n              {console.log(height)}\n            </clipPath>\n          </defs>\n          <g transform={translate(0, height)} ref={element => {\n            if (element) {\n              select(element).call(xAxis);\n            }\n          }} />\n          <g className={cx({\n            group: true,\n            has_status: !!status\n          }, status)}>\n            {data.map(([entity, links], index) => {\n              return (\n                <g key={entity.name} className={entity.name} transform={translate(0, yScale(index))}>\n                  <line className='group-separator' x1={0} x2={width} y1={0} y2={0} stroke='black' strokeOpacity={0.1} />\n                  <text className='entity-label' style={{clipPath: `url(#name-area-${id})`}} fontSize={props.lineHeight} dy='1em'>{entity.name}</text>\n                  <g>\n                    {links.map((link: Link) => {\n                      const w = intervalRectWidth(link);\n                      return (\n                        <g key={link.id} transform={translate(xScale(link.start_year), intervalBarMargin)}>\n                          <rect\n                            rx='5'\n                            className={cx('link-rect', link.status.slug)}\n                            onClick={() => props.onLinkClick(link)}\n                            onMouseEnter={() => setHover({link: link, index: index})}\n                            fill={isNaN(w) ? `url(#diagonalHatch-${id})` : colorScale(link.status.slug)}\n                            stroke={hover && hover.link === link ? 'white' : 'black'}\n                            strokeOpacity={hover && hover.link === link ? 1 : 0.2}\n                            strokeWidth={hover && hover.link === link ? 2 : 1}\n                            width={isNaN(w) ? '100%' : w}\n                            height={intervalBarHeight}\n                            y={0}\n                            x={0}\n                          />\n                        </g>\n                      )\n                    })}\n                  </g>\n                </g>\n              )\n            })}\n          </g>\n        </g>\n      </svg>\n    </div>\n  );\n}\n\nexport default Timelines;\n","import React, { useContext, useCallback } from 'react';\n\nimport equals from 'ramda/es/equals';\nimport { AppContext } from './AppContext';\nimport Timelines from './timeline';\nimport { Link, RouteComponentProps } from 'react-router-dom';\n\nconst Country: React.FC<{\n  id: string,\n} & RouteComponentProps<{\n  id: string\n}>> = (props) => {\n  const {history} = props;\n  const id = props.match.params.id;\n  const {state}: {state: GlobalState} = useContext(AppContext);\n  const country = state.entities.find(entity => equals(entity.id, id));\n  const onOccupiedLinkClick = useCallback(link => {\n    history.push(`/country/${link.sovereign.id}`);\n  }, [history]);\n  const onCampainsLinkClick = useCallback(link => {\n    history.push(`/country/${link.COW_code}`);\n  }, [history]);\n  if (country === undefined) {\n    return (<div>Loading</div>);\n  }\n  return (\n    <div>\n      <aside>\n        <Link to='/'>Home</Link>\n      </aside>\n      <h1>{country.name}</h1>\n      <h2>Territory masters</h2>\n      <Timelines\n        onLinkClick={onOccupiedLinkClick}\n        intervalMinWidth={5}\n        data={country.occupations}\n        lineHeight={20}\n        width={1000}\n      />\n      {/* <Histogram width={1000} height={300} data={Array.from(country.campains.values())} /> */}\n      <h2>Occupying territories</h2>\n      <Timelines\n        onLinkClick={onCampainsLinkClick}\n        intervalMinWidth={5}\n        data={country.campains}\n        lineHeight={20}\n        width={1000}\n      />\n    </div>\n  );\n}\n\nexport default Country;\n","import React, { useCallback, useContext } from 'react';\nimport { map } from 'ramda';\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport Select from 'react-select';\n\nimport './App.css';\nimport Country from './Country';\nimport AppContextProvider, { AppContext } from './AppContext';\nimport { RouterProps } from 'react-router';\n// import createMemoryHistory from 'history/createMemoryHistory';\n\nconst countriesToOptions = map((country: Entity) => ({\n  value: country.id, label: country.name,\n}));\n\nconst Home: React.FC<RouterProps> = (props) => {\n  console.log(props);\n  const { state }: {state: GlobalState} = useContext(AppContext);\n  const onChange = useCallback((event) => {\n    props.history.push(`/country/${event.value}`);\n  }, [props.history]);\n  return (\n    <Select\n      onChange={onChange}\n      options={countriesToOptions(state.entities)}\n    />\n  );\n}\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <AppContextProvider>\n        <Router basename={process.env.NODE_ENV === 'production' ? '/ric_entities_timelines' : '/'}>\n          <Route path='/' exact component={Home} />\n          <Route path='/country/:id' component={Country} />\n        </Router>\n      </AppContextProvider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}