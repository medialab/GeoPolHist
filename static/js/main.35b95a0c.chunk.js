(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(16),o=n.n(i),l=(n(66),n(34)),s=n.n(l),u=n(51),d=n(59),m=n(5),f=n(17),O=n(58),b=(n(68),n(24)),p=n(10),g=n(60),h=n(7),y=n(52),j=n(53),v=n.n(j),E={"Became part of":{slug:"part",priority:2},"Became colony of":{slug:"col",priority:3},"Became possession of":{slug:"poss",priority:3},"Claimed by":{slug:"claim",priority:0},"Became protectorate of":{slug:"prot",priority:3},"Became associated state of":{slug:"assoc",priority:0},"Occupied by":{slug:"occ",priority:1},"Leased to":{slug:"leas",priority:0},"Became neutral or demilitarized zone of":{slug:"neut",priority:0},"Mandated to":{slug:"mand",priority:0},Sovereign:{slug:"SOV",priority:4},"Unincorporated territory":{slug:"uninc",priority:0},"Autonomous constituent country of":{slug:"autonom",priority:0},"Sovereign (unrecognised)":{slug:"SOV_U",priority:0},"Sovereign (limited)":{slug:"SOV_L",priority:1},"Protected area of":{slug:"protected",priority:0},Unknown:{slug:"N/A",priority:0},"":{slug:"alliance",priority:0}},k=function(e,t){return"translate(".concat(e,", ").concat(t,")")};!function(e){e.part="part",e.col="col",e.poss="poss",e.claim="claim",e.prot="prot",e.assoc="assoc",e.occ="occ",e.leas="leas",e.neut="neut",e.mand="mand",e.SOV="SOV",e.uninc="uninc",e.autonom="autonom",e.SOV_U="SOV_U",e.SOV_L="SOV_L",e.protected="protected",e.NA="N/A",e.alliance="alliance"}(a||(a={}));var _=n(35),w=n(37),C=n(22),W=n(25),S=n(54),N={links:[],entities:[]},x=Object(r.createContext)({state:N,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),M=Object(_.a)(function(e){return e.COW_code}),L=[a.SOV,a.SOV_U,a.SOV_L],V=function(e,t){var n=new S.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var r=e[a],c=t[a];if(void 0===c)continue;for(var i=0;i<r.length;i++){var o=r[i];n.set(c,o)}}return n},A=function(e,t){switch(t.type){case"LOADED":var n=t.payload.map(function(e){return{id:v()(),COW_code:e.COW_code,COW_name:e.COW_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:E[e.link_type],sovereign:{COW_code:e.sovereign_COW_code,COW_name:e.sovereign_COW_name}}}),a=M(n),r=Object(W.a)(function(e,t){var r=Object(C.a)(Object(w.a)(function(e){return!L.includes(e.status.slug)&&Object(b.a)(e.COW_code,t)}),Object(_.a)(function(e){return e.sovereign.COW_code})),c=Object(C.a)(Object(w.a)(function(e){return Object(b.a)(e.sovereign.COW_code,t)}),M),i=r(e);return{id:t,name:a[t][0].COW_name,start:Object(h.d)(e,function(e){return e.start_year}),end:Object(h.c)(e,function(e){return e.end_year}),occupations:i,campains:c(n)}},a),c=Object(d.a)(function(e){return Object(g.a)({},e,{occupations:V(e.occupations,r),campains:V(e.campains,r)})},r);return n.forEach(function(e){e.sovereign=c[e.sovereign.COW_code]}),{links:n,entities:Object(h.j)(c)}}return e},B=function(e){return Object(y.action)("LOADED",e)},H=Object(h.b)("data/RICentities_links.csv"),U=function(e){var t=Object(r.useReducer)(A,N),n=Object(p.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)(function(){H.then(Object(C.a)(B,i))},[]),c.a.createElement(x.Provider,{value:{state:a,dispatch:i}},e.children)},D=n(38),P=n(36),z=n(55),I=n(26),J=n(56),R=n(29),G=n.n(R),T=(n(99),Object(h.f)(["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]).domain(Object(P.a)(a))),Y=50,$=0,q=0,F=50,K=0,Q=Object(h.i)("%Y"),X=function(e,t){return e+ +t.end_year-+t.start_year},Z=Object(z.a)(function(e,t){var n=Object(p.a)(e,2)[1];return Object(p.a)(t,2)[1].reduce(X,0)-n.reduce(X,0)}),ee=Object(C.a)(Object(I.a)(function(e,t){var n=Object(p.a)(t,2)[1];return[].concat(Object(D.a)(e),Object(D.a)(n))},[]),Object(J.a)(function(e){return e.status.slug})),te=function(e){var t=Object(r.useMemo)(function(){return Z(Array.from(e.data.associations()))},[e.data]),n=Object(h.d)(t,function(e){return Object(p.a)(e,1)[0].start}),a=Object(h.c)(t,function(e){return Object(p.a)(e,1)[0].end}),i=e.width-K-q,o=e.data.dimension*e.lineHeight+$+F,l=o-$-F,s=e.hideGroupLabels?0:200,u=l/t.length,d=function(t){return Math.max(e.intervalMinWidth,m(t.end_year)-m(t.start_year))},m=Object(h.g)().domain([n,a]).range([s,i]),f=Object(h.e)().domain([0,e.data.dimension]).range([0,l]),O=Object(h.a)(m),b=.8*u,g=(u-b)/2,y=Object(r.useState)(),j=Object(p.a)(y,2),v=j[0],E=j[1],_=Object(r.useState)(),w=Object(p.a)(_,2),C=w[0],S=w[1],N=Object(r.useMemo)(function(){return ee(t)},[t]);return Object(r.useEffect)(function(){return function(){E(null),S(null)}},[e.data]),c.a.createElement("div",{className:"timelines-container",style:{width:i}},v&&c.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(m(v.link.start_year),"px, ").concat(f(v.index)+Y+$+e.lineHeight,"px)"),minWidth:d(v.link)}},c.a.createElement("span",{className:"tooltip"},v.link.COW_name," was a ",v.link.status.slug," from ",Q(v.link.start_year)," to ",Q(v.link.end_year))),c.a.createElement("div",{className:"legend-container"},Object(P.a)(Object(W.a)(function(e,t){return c.a.createElement("button",{onClick:function(){return S(C===t?null:t)},className:G()({"legend-item":!0,"legend-item--hidden":C&&C!==t}),key:t,style:{backgroundColor:T(t)}},t," : ",e)},N))),c.a.createElement("svg",{height:o,width:e.width},c.a.createElement("g",{transform:k(K,$)},c.a.createElement("defs",null,c.a.createElement("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4"},c.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),c.a.createElement("clipPath",{id:"chart-content"},c.a.createElement("rect",{x:s,y:0,height:l,width:i-s})),c.a.createElement("clipPath",{id:"name-area"},c.a.createElement("rect",{x:0,y:0,height:l,width:s}))),c.a.createElement("g",{transform:k(0,l),ref:function(e){e&&Object(h.h)(e).call(O)}}),c.a.createElement("g",{className:G()({group:!0,has_status:!!C},C)},t.map(function(t,n){var a=Object(p.a)(t,2),r=a[0],o=a[1];return c.a.createElement("g",{key:r.name,className:r.name,transform:k(0,f(n))},c.a.createElement("line",{className:"group-separator",x1:0,x2:i,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),c.a.createElement("text",{className:"entity-label",fontSize:e.lineHeight,dy:"1em"},r.name),c.a.createElement("g",null,o.map(function(t){var a=d(t);return c.a.createElement("g",{key:t.id,transform:k(m(t.start_year),g)},c.a.createElement("rect",{rx:"5",className:G()("link-rect",t.status.slug),onClick:function(){return e.onLinkClick(t)},onMouseEnter:function(){return E({link:t,index:n})},fill:isNaN(a)?"url(#diagonalHatch)":T(t.status.slug),stroke:v&&v.link===t?"white":"black",strokeOpacity:v&&v.link===t?1:.2,strokeWidth:v&&v.link===t?2:1,width:isNaN(a)?"100%":a,height:b,y:0,x:0}))})))})))))},ne=function(e){var t=e.id,n=Object(r.useContext)(x).state.entities.find(function(e){return Object(b.a)(e.id,t)}),a=Object(f.d)(),i=Object(r.useCallback)(function(e){console.log(e),a.navigate("/country/".concat(e.sovereign.id))},[a]),o=Object(r.useCallback)(function(e){a.navigate("/country/".concat(e.COW_code))},[a]);return void 0===n?c.a.createElement("div",null,"Loading"):c.a.createElement("div",null,c.a.createElement("aside",null,c.a.createElement(f.a,{href:"/"},"Home")),c.a.createElement("h1",null,n.name),c.a.createElement("h2",null,"Territory masters"),c.a.createElement(te,{onLinkClick:i,intervalMinWidth:5,data:n.occupations,lineHeight:20,width:1e3}),c.a.createElement("h2",null,"Occupying territories"),c.a.createElement(te,{onLinkClick:o,intervalMinWidth:5,data:n.campains,lineHeight:20,width:1e3}))},ae=Object(d.a)(function(e){return{value:e.id,label:e.name}}),re=Object(m.g)({"/":Object(m.h)({title:"Welcome",view:c.a.createElement(function(){var e=Object(f.d)(),t=Object(r.useContext)(x).state,n=Object(r.useCallback)(function(t){e.navigate("/country/".concat(t.value))},[e]);return c.a.createElement(O.a,{onChange:n,options:ae(t.entities)})},null)}),"/country/:id":Object(m.h)(function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{title:"Coutry",view:c.a.createElement(ne,{id:t.params.id})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),ce=Object(m.c)({routes:re,url:"/",basename:"/ric_entities_timelines"}),ie=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(U,null,c.a.createElement(f.b,{navigation:ce},c.a.createElement(r.Suspense,{fallback:null},c.a.createElement(f.c,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,n){e.exports=n(104)},66:function(e,t,n){},68:function(e,t,n){},99:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.35b95a0c.chunk.js.map