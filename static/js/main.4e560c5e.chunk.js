(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(23),o=n.n(i),l=(n(79),n(70)),s=n(22),u=n(21),m=n(69),d=n(24),f=n(71),p=n(32),b=n(51),O=(n(80),n(30)),g=n(9),y=n(34),h=n(72),E=n(6),j=n(64),v=n(35),k=n.n(v),_={"Became part of":{slug:"part",priority:2},"Became colony of":{slug:"col",priority:3},"Became possession of":{slug:"poss",priority:3},"Became dependency of":{slug:"dep",priority:3},"Became concession of":{slug:"conc",priority:3},"Claimed by":{slug:"claim",priority:0},"Became protectorate of":{slug:"prot",priority:3},"Became associated state of":{slug:"assoc",priority:0},"Occupied by":{slug:"occ",priority:1},"Leased to":{slug:"leas",priority:0},"Became neutral or demilitarized zone of":{slug:"neut",priority:0},"Mandated to":{slug:"mand",priority:0},Sovereign:{slug:"SOV",priority:4},"Unincorporated territory":{slug:"uninc",priority:0},"Autonomous constituent country of":{slug:"autonom",priority:0},"Sovereign (unrecognised)":{slug:"SOV_U",priority:0},"Sovereign (limited)":{slug:"SOV_L",priority:1},International:{slug:"int",priority:3},Informal:{slug:"inf",priority:2},"Protected area of":{slug:"protected",priority:0},Unknown:{slug:"N/A",priority:0},"":{slug:"???",priority:3}},w=function(e,t){return"translate(".concat(e,", ").concat(t,")")};!function(e){e.part="part",e.col="col",e.poss="poss",e.claim="claim",e.prot="prot",e.assoc="assoc",e.occ="occ",e.leas="leas",e.neut="neut",e.mand="mand",e.SOV="SOV",e.uninc="uninc",e.autonom="autonom",e.SOV_U="SOV_U",e.SOV_L="SOV_L",e.protected="protected",e.NA="N/A",e.alliance="alliance",e.inf="informal",e.conc="concession",e.int="international",e.dep="dependency"}(a||(a={}));var C=n(41),N=n(73),W=n(50),S=n(31),x=n(36),M=n(65),L={links:[],entities:[]},V=Object(c.createContext)({state:L,dispatch:function(e){console.log("not la bonne fonction poto",e)}}),B=Object(C.a)(function(e){return e.COW_code}),A=(a.SOV,a.SOV_U,a.SOV_L,function(e,t){var n=new M.MultiMap;for(var a in e)if(e.hasOwnProperty(a)){var c=e[a],r=t[a];if(void 0===r)continue;for(var i=0;i<c.length;i++){var o=c[i];n.set(r,o)}}return n}),H=function(e,t){switch(t.type){case"LOADED":var n=t.payload.map(function(e){var t={id:k()(),COW_code:e.COW_code,COW_name:e.COW_name,end_year:new Date(e.end_year),start_year:new Date(e.start_year),status:_[e.link_type],sovereign:{COW_code:e.sovereign_COW_code,COW_name:e.sovereign_COW_name}};return t.status||console.error("unknown link type",e),t}),a=B(n),c=Object(x.a)(function(e,t){var c=Object(S.a)(Object(W.a)(function(e){return Object(y.a)(e.COW_code,t)}),Object(C.a)(function(e){return e.sovereign.COW_code||t})),r=Object(S.a)(Object(W.a)(function(e){return Object(y.a)(e.sovereign.COW_code,t)}),B),i=c(e),o=r(n),l=Object(C.a)(function(e){return e.status.slug},Object(N.a)(Object(E.k)(o)));return{id:t,name:a[t][0].COW_name,start:Object(E.e)(e,function(e){return e.start_year}),end:Object(E.d)(e,function(e){return e.end_year}),occupations:i,campains:o,campainsMap:l}},a),r=Object(l.a)(function(e){return Object(h.a)({},e,{occupations:A(e.occupations,c),campains:A(e.campains,c)})},c);return n.forEach(function(e){e.sovereign=r[e.sovereign.COW_code]}),{links:n,entities:Object(E.k)(r)}}return e},U=function(e){return Object(j.action)("LOADED",e)},z=Object(E.c)("data/COW_Entities_extended.csv"),D=function(e){var t=Object(c.useReducer)(H,L),n=Object(g.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)(function(){z.then(Object(S.a)(U,i))},[]),r.a.createElement(V.Provider,{value:{state:a,dispatch:i}},e.children)},P=n(37),T=n(66),I=n(42),J=n.n(I),G=(n(111),Object(E.g)(["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]).domain(Object(p.a)(a))),R=50,Y=0,$=0,q=50,F=0,K=Object(E.j)("%Y"),Q=Object(S.a)(Object(P.a)(function(e,t){var n=Object(g.a)(t,2)[1];return[].concat(Object(O.a)(e),Object(O.a)(n))},[]),Object(T.a)(function(e){return e.status.slug})),X=function(e){var t=e.xScale,n=e.data,a=e.nbLines,i=Object(c.useMemo)(k.a,[]),o=e.width-F-$,l=a*e.lineHeight+Y+q,s=l-Y-q,u=e.hideGroupLabels?0:200,m=s/n.length,d=function(n){return Math.max(e.intervalMinWidth,t(n.end_year)-t(n.start_year))};t.range([u,o]);var f=Object(E.f)().domain([0,a]).range([0,s]),b=Object(E.b)(t),O=Object(E.a)(t),y=.8*m,h=(m-y)/2,j=Object(c.useState)(),v=Object(g.a)(j,2),_=v[0],C=v[1],N=Object(c.useState)(),W=Object(g.a)(N,2),S=W[0],M=W[1],L=Object(c.useMemo)(function(){return Q(n)},[n]);return Object(c.useEffect)(function(){return function(){C(null),M(null)}},[e.data]),r.a.createElement("div",{className:"timelines-container",style:{width:o},onMouseLeave:function(){return C(null)}},_&&r.a.createElement("div",{className:"tooltip-container",style:{transform:"translate(".concat(t(_.link.start_year),"px, ").concat(f(_.index)+R+Y+e.lineHeight+20,"px)"),minWidth:d(_.link)}},r.a.createElement("span",{className:"tooltip"},_.link.COW_name," was a ",_.link.status.slug," from ",K(_.link.start_year)," to ",K(_.link.end_year))),r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"legend-container"},Object(p.a)(Object(x.a)(function(e,t){return r.a.createElement("button",{onClick:function(){return M(S===t?null:t)},className:J()({"legend-item":!0,"legend-item--hidden":S&&S!==t}),key:t,style:{backgroundColor:G(t)}},t," : ",e)},L))),r.a.createElement("svg",{height:20,width:e.width},r.a.createElement("g",{transform:w(F,Y)},r.a.createElement("g",{transform:w(0,17),ref:function(e){e&&Object(E.i)(e).call(b)}})))),r.a.createElement("svg",{height:l,width:e.width},r.a.createElement("g",{transform:w(F,Y)},r.a.createElement("defs",null,r.a.createElement("pattern",{id:"diagonalHatch-".concat(i),patternUnits:"userSpaceOnUse",width:"4",height:"4"},r.a.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"black",strokeWidth:1}})),r.a.createElement("clipPath",{id:"name-area-".concat(i)},r.a.createElement("rect",{x:0,y:0,height:s,width:u}))),r.a.createElement("g",{transform:w(0,s),ref:function(e){e&&Object(E.i)(e).call(O)}}),r.a.createElement("g",{className:J()({group:!0,has_status:!!S},S)},n.map(function(n,a){var c=Object(g.a)(n,2),l=c[0],s=c[1];return r.a.createElement("g",{key:l.name,className:l.name,transform:w(0,f(a))},r.a.createElement("line",{className:"group-separator",x1:0,x2:o,y1:0,y2:0,stroke:"black",strokeOpacity:.1}),r.a.createElement("text",{className:"entity-label",style:{clipPath:"url(#name-area-".concat(i,")")},fontSize:e.lineHeight,dy:"1em"},l.name),r.a.createElement("g",null,s.map(function(n){var c=d(n);return r.a.createElement("g",{key:n.id,transform:w(t(n.start_year),h)},r.a.createElement("rect",{rx:"5",className:J()("link-rect",n.status.slug),onClick:function(){return e.onLinkClick(n)},onMouseEnter:function(){return C({link:n,index:a})},fill:isNaN(c)?"url(#diagonalHatch-".concat(i,")"):G(n.status.slug),stroke:_&&_.link===n?"white":"black",strokeOpacity:_&&_.link===n?1:.2,strokeWidth:_&&_.link===n?2:1,width:isNaN(c)?"100%":c,height:y,y:0,x:0}))})))})))))},Z=function(e,t){return e+ +t.end_year-+t.start_year},ee=Object(d.a)(function(e,t){var n=Object(g.a)(e,2)[1];return Object(g.a)(t,2)[1].reduce(Z,0)-n.reduce(Z,0)}),te=function(e){var t=e.history,n=e.country,a=Object(c.useCallback)(function(e){t.push("/country/".concat(e.sovereign.id))},[t]),i=Object(c.useCallback)(function(e){t.push("/country/".concat(e.COW_code))},[t]),o=Array.from(n.occupations.associations()),l=Array.from(n.campains.associations()),u=Object(c.useMemo)(function(){return ee([].concat(Object(O.a)(o),Object(O.a)(l)))},[o,l]),m=Object(E.e)(u,function(e){return Object(g.a)(e,1)[0].start}),d=Object(E.d)(u,function(e){return Object(g.a)(e,1)[0].end}),f=Object(E.h)().domain([m,d]);return r.a.createElement("div",null,r.a.createElement("aside",null,r.a.createElement(s.b,{to:"/"},"Home")),r.a.createElement("h1",null,n.name),r.a.createElement("h2",null,"Territory masters"),r.a.createElement(X,{onLinkClick:a,intervalMinWidth:5,data:o,nbLines:n.occupations.dimension,lineHeight:20,width:1e3,xScale:f}),r.a.createElement("h2",null,"Occupying territories"),r.a.createElement(X,{onLinkClick:i,intervalMinWidth:5,data:l,nbLines:n.campains.dimension,lineHeight:20,width:1e3,xScale:f}))},ne=function(e){var t=e.match.params.id,n=Object(c.useContext)(V).state.entities.find(function(e){return Object(y.a)(e.id,t)});return void 0===n?r.a.createElement("div",null,"Loading"):r.a.createElement(te,Object.assign({},e,{country:n}))},ae=Object(l.a)(function(e){return{value:e.id,label:e.name}}),ce=Object(d.a)(function(e,t){return t.campains.size-e.campains.size}),re=Object(d.a)(function(e,t){return t.occupations.size-e.occupations.size}),ie=Object(b.a)(0,["campainsMap","col","length"]),oe=Object(d.a)(function(e,t){return ie(t)-ie(e)}),le=Object(f.a)(5),se=function(e){var t=le(ce(e.entities)),n=le(re(e.entities)),c=le(oe(e.entities));return r.a.createElement("div",null,r.a.createElement("h2",null,"Some examples:"),r.a.createElement("div",{className:"line"},r.a.createElement("div",{className:"grow"},r.a.createElement("h3",null,"Most aggresive empires:"),r.a.createElement("ol",null,t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name))}))),r.a.createElement("div",{className:"grow"},r.a.createElement("h3",null,"Occupied by most different countries:"),r.a.createElement("ol",null,n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name))}))),r.a.createElement("div",{className:"grow"},r.a.createElement("h3",null,"Most colonies:"),r.a.createElement("ol",null,c.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name))})))),r.a.createElement("h3",null,"Countries by status"),r.a.createElement("div",{className:"line"},Object(p.a)(a).map(function(t){var n=Object(b.a)(0,["campainsMap",t,"length"]),a=Object(d.a)(function(e,t){return n(t)-n(e)});return r.a.createElement("div",{key:t,className:"grow"},r.a.createElement("h3",null,"counties with most ",t,":"),r.a.createElement("ol",null,le(a(e.entities)).map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:"/country/".concat(e.id)},e.name))})))})))},ue=function(e){var t=Object(c.useContext)(V).state,n=Object(c.useCallback)(function(t){e.history.push("/country/".concat(t.value))},[e.history]);return r.a.createElement("div",{className:"container container--home"},r.a.createElement("h1",null,"Welcome"),r.a.createElement("h3",null,"To the correlates of war time series explorer"),r.a.createElement("p",null,"Type a country or a territorial name in the above text input :"),r.a.createElement(m.a,{placeholder:t.entities.length?"Type in":"Still loading",onChange:n,options:ae(t.entities)}),t.entities.length?r.a.createElement(se,{entities:t.entities}):r.a.createElement("p",null,"Data is still loading..."))},me=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,null,r.a.createElement(s.a,{basename:"/ric_entities_timelines"},r.a.createElement(u.a,{path:"/",exact:!0,component:ue}),r.a.createElement(u.a,{path:"/country/:id",component:ne}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,n){e.exports=n(118)},79:function(e,t,n){},80:function(e,t,n){}},[[74,1,2]]]);
//# sourceMappingURL=main.4e560c5e.chunk.js.map